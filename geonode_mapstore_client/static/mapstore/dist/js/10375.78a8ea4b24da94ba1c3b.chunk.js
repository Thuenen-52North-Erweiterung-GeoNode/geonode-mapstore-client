(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[10375],{810375:(n,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>g});var r=e(845243),o=e.n(r),i=e(984596),l=e.n(i);function c(n){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},c(n)}function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function a(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,s(r.key),r)}}function f(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function d(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?f(Object(e),!0).forEach((function(t){y(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):f(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function y(n,t,e){return(t=s(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function s(n){var t=function(n,t){if("object"!==c(n)||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var r=e.call(n,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"===c(t)?t:String(t)}function v(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var p={Point:["Mark","Icon","Text"],MultiPoint:["Mark","Icon","Text"],LineString:["Line"],MultiLineString:["Line"],Polygon:["Fill"],MultiPolygon:["Fill"]};function m(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n.properties?Object.keys(n.properties).reduce((function(t,e){var r,o=new RegExp("\\{\\{".concat(e,"\\}\\}"),"g");return t.replace(o,null!==(r=n.properties[e])&&void 0!==r?r:"")}),t):t}function b(n,t){var e,r=n.rules,i=void 0===r?[]:r,c=t.geoStylerStyleFilter,u=t.images,a=t.getImageIdFromSymbolizer,f=(e=i,function(n){if(Array.isArray(n))return v(n)}(e)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(e)||function(n,t){if(n){if("string"==typeof n)return v(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?v(n,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).reverse();return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.opacity,e=void 0===t?1:t;return{filter:function(n){var t,e=null==n||null===(t=n.geometry)||void 0===t?void 0:t.type;if(0===f.length)return!1;var r=p[e]||[];return!!f.find((function(t){var e;return(null==t||null===(e=t.symbolizers)||void 0===e?void 0:e.find((function(n){return r.includes(n.kind)})))&&(!t.filter||c(n,t.filter))}))},pointToLayer:function(n,t){var r,i,d=null==n||null===(r=n.geometry)||void 0===r?void 0:r.type,y=p[d]||[],s=f.find((function(t){var e;return(null==t||null===(e=t.symbolizers)||void 0===e?void 0:e.find((function(n){return y.includes(n.kind)})))&&(!t.filter||c(n,t.filter))}))||{},v=(null==s||null===(i=s.symbolizers)||void 0===i?void 0:i.find((function(n){return y.includes(n.kind)})))||{};if("Mark"===v.kind){var b=u.find((function(n){return n.id===a(v)}))||{},g=b.image,h=b.src,S=b.width,w=b.height;if(g){var k=S/w,O=2*v.radius,j=O,I=j/k;return w>S&&(j=(I=O)*k),o().marker(t,{icon:o().icon({iconUrl:h,iconSize:[j,I],iconAnchor:[j/2,I/2]}),opacity:1*e})}}if("Icon"===v.kind){var P=u.find((function(n){return n.id===a(v)}))||{},z=P.image,F=P.src,x=P.width,A=P.height;if(z){var _=x/A,C=v.size,M=C/_;return A>x&&(C=(M=v.size)*_),o().marker(t,{icon:o().icon({iconUrl:F,iconSize:[C,M],iconAnchor:[C/2,M/2]}),opacity:v.opacity*e})}}if("Text"===v.kind){var T,E,L,D,W,U=m(n,v.label),J="\n                        -webkit-text-stroke-width:".concat(v.haloWidth,"px;\n                        -webkit-text-stroke-color:").concat(v.haloColor||"",";\n                    "),N=o().divIcon({html:'<div style="\n                            color:'.concat(v.color,";\n                            font-family: ").concat(l()(v.font||[]).join(", "),";\n                            font-style: ").concat(v.fontStyle||"normal",";\n                            font-weight: ").concat(v.fontWeight||"normal",";\n                            font-size: ").concat(v.size,"px;\n\n                            position: absolute;\n                            transform: translate(").concat(null!==(T=null==v||null===(E=v.offset)||void 0===E?void 0:E[0])&&void 0!==T?T:0,"px, ").concat(null!==(L=null==v||null===(D=v.offset)||void 0===D?void 0:D[1])&&void 0!==L?L:0,"px) rotateZ(").concat(null!==(W=null==v?void 0:v.rotate)&&void 0!==W?W:0,"deg);\n\n                            ").concat(v.haloWidth>0?J:"",'\n                        ">\n                            ').concat(U,"\n                            </div>"),className:""});return o().marker(t,{icon:N,opacity:1*e})}return null},style:function(n){var t,r,o,i,l=null==n||null===(t=n.geometry)||void 0===t?void 0:t.type,u=p[l]||[],a=f.find((function(t){var e;return(null==t||null===(e=t.symbolizers)||void 0===e?void 0:e.find((function(n){return u.includes(n.kind)})))&&(!t.filter||c(n,t.filter))}))||{},y=(null==a||null===(r=a.symbolizers)||void 0===r?void 0:r.find((function(n){return u.includes(n.kind)})))||{};return"Line"===y.kind?d(d(d({stroke:!0,fill:!1,color:y.color,opacity:y.opacity*e,weight:y.width},y.dasharray&&{dashArray:y.dasharray.join(" ")}),y.cap&&{lineCap:y.cap}),y.join&&{lineJoin:y.join}):"Fill"===y.kind?{fill:!0,stroke:!0,fillColor:y.color,fillOpacity:y.fillOpacity*e,color:y.outlineColor,opacity:(null!==(o=y.outlineOpacity)&&void 0!==o?o:0)*e,weight:null!==(i=y.outlineWidth)&&void 0!==i?i:0}:{stroke:!1,fill:!1}}}}}const g=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.drawIcons,r=t.getImageIdFromSymbolizer,o=t.geoStylerStyleFilter;u(this,n),this._drawIcons=e||function(){return Promise.resolve(null)},this._getImageIdFromSymbolizer=r||function(n){return n.symbolizerId},this._geoStylerStyleFilter=o||function(){return!0}}var t,e;return t=n,e=[{key:"readStyle",value:function(){return new Promise((function(n,t){try{n(null)}catch(n){t(n)}}))}},{key:"writeStyle",value:function(n){var t=this;return new Promise((function(e,r){try{t._drawIcons(n).then((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=b(n,{images:r,getImageIdFromSymbolizer:t._getImageIdFromSymbolizer,geoStylerStyleFilter:t._geoStylerStyleFilter});e(o)}))}catch(n){r(n)}}))}}],e&&a(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),n}()}}]);