(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[69845],{979322:(e,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>m});var n=i(124852),t=i.n(n),u=i(91175),l=i.n(u),o=i(513218),a=i.n(o),c=i(171703),s=i(322843),f=i(199914),y=i(580416);function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=e[i];return n}var v=function(e,r){return e.filter((function(e){return r===e.group}))},p=function(e){var r=0;return e.forEach((function(e){e.visibility&&r++})),r},g=function(e,r,i){for(var n=[],t=function(i){var t=r.filter((function(r){return e[i].id===r.id}))[0];t&&e[i].visibility&&!t.visibility&&n.push(e[i])},u=0;u<e.length;u++)t(u);if(1===n.length){var l=b(i,n[0]);l&&l.exclusiveLayer&&v(e,n[0].group).forEach((function(e){e.id!==n[0].id&&i.updateLayerVisibility(e.id,"layer",{visibility:!1})}))}},b=function(e,r){var i=l()(e.groups.filter((function(e){return a()(e)&&e.id===r.group})));return void 0!==i?i:l()(e.groups.filter((function(e){return a()(e)&&"Default"===e.id})))},h=(0,c.connect)((function(e){return{layers:(0,f.Bi)(e),groups:(0,f.Mm)(e)}}),{updateLayerVisibility:y.tV})((function(e){var r=e.layers,i=e.groups.filter((function(e){return"Default"!==e.id})),u=(0,n.useRef)(""),l=function(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,t,u,l,o=[],a=!0,c=!1;try{if(u=(i=i.call(e)).next,0===r){if(Object(i)!==i)return;a=!1}else for(;!(a=(n=u.call(i)).done)&&(o.push(n.value),o.length!==r);a=!0);}catch(e){c=!0,t=e}finally{try{if(!a&&null!=i.return&&(l=i.return(),Object(l)!==l))return}finally{if(c)throw t}}return o}}(e,r)||function(e,r){if(e){if("string"==typeof e)return d(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(!1),2),o=l[0],a=l[1];(0,n.useEffect)((function(){u.current={layers:r,groups:i}}),[o]);var c=!1;if(window.onclick=function(n){var t,l=n.target;(l.className.includes("glyphicon-record")||l.className.includes("glyphicon-unchecked")||l.className.includes("glyphicon-eye-open")||l.className.includes("glyphicon-eye-close"))&&((t=l,c=t.parentElement.attributes.class.nodeValue.includes("toc-default-group-head")?t.className.includes("glyphicon-eye-open")?{clicked:!0,open:!0}:{clicked:!0,open:!1}:{clicked:!1,open:null}).clicked&&c.open?function(e,r,i){e&&e.forEach((function(e){if(e.exclusiveLayer){var n=v(r,e.id);if(p(n)>1){n=n.reverse(),i.updateLayerVisibility(n[0].id,"layer",{visibility:!0});for(var t=1;t<n.length;t++)i.updateLayerVisibility(n[t].id,"layer",{visibility:!1})}}}))}(i,r,e):function(e,r,i){e&&r.current&&g(i,r.current.layers,e)}(e,u,r),a(!o))},u.current.groups&&i)for(var s=function(n){var t=u.current.groups.filter((function(e){return i[n].id===e.id}))[0];if(t){if(i[n].exclusiveLayer&&!t.exclusiveLayer){var l=v(r,i[n].id);p(l)>1&&l.forEach((function(r){e.updateLayerVisibility(r.id,"layer",{visibility:!1})}))}!function(e,r,i,n,t){if(e.nodes.length-r.nodes.length==1&&e.exclusiveLayer){var u=v(i,e.id),l=v(n,e.id);if(p(u)>1)for(var o=function(e){var r=l.filter((function(r){return r.id===u[e].id}))[0];if(r&&r.visibility&&t.updateLayerVisibility(u[e].id,"layer",{visibility:!1}),void 0===r){var i=u[e].visibility;t.updateLayerVisibility(u[e].id,"layer",{visibility:!i})}},a=0;a<u.length;a++)o(a)}}(i[n],t,r,u.current.layers,e)}},f=0;f<i.length;f++)s(f);return t().createElement("div",null)}));const m=(0,s.rx)("ExclusiveLayer",{component:h})},199914:(e,r,i)=>{"use strict";i.d(r,{Bi:()=>u,Mm:()=>l});var n=i(513218),t=i.n(n),u=function(e){return e.layers.flat.filter((function(e){return function(e){if("background"!=e.group)return e}(e)}))},l=function(e){return o(e.layers.groups)},o=function(e){if(Array.isArray(e)){var r=[];return function e(i){i.forEach((function(i){t()(i)&&(r.push(i),i.nodes&&e(i.nodes))}))}(e),r}return[]}}}]);