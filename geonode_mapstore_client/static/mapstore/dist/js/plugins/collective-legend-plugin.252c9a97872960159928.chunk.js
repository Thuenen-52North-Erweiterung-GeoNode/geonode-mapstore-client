(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[50333],{262770:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(124852),o=n.n(r),i=n(45697),l=n.n(i),a=n(441609),c=n.n(a),s=n(281763),u=n.n(s),p=n(490079);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function h(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===f(t)?t:String(t)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(a,e);var t,n,r,i,l=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(i){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),h(g(t=l.call(this,e)),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),h(g(t),"canShow",(function(e){return e.visibility||!t.props.showOnlyIfVisible})),h(g(t),"useLegendOptions",(function(){return!c()(t.props.node.legendOptions)&&u()(t.props.node.legendOptions.legendHeight)&&u()(t.props.node.legendOptions.legendWidth)})),h(g(t),"setOverflow",(function(){return t.useLegendOptions()&&t.props.node.legendOptions.legendWidth>t.state.containerWidth})),t.containerRef=o().createRef(),t}return t=a,n=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e=this.props.node||{},t=this.canShow(e)&&"wms"===e.type&&"background"!==e.group,n=t&&this.useLegendOptions();return t?o().createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},o().createElement(p.Z,{style:this.setOverflow()?{}:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):null}}],n&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(o().Component);h(j,"propTypes",{node:l().object,legendContainerStyle:l().object,legendStyle:l().object,showOnlyIfVisible:l().bool,currentZoomLvl:l().number,scales:l().array,WMSLegendOptions:l().string,scaleDependent:l().bool,language:l().string,legendWidth:l().number,legendHeight:l().number}),h(j,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0});const w=j},490079:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var r=n(472500),o=n.n(r),i=n(701469),l=n.n(i),a=n(414293),c=n.n(a),s=n(727418),u=n.n(s),p=n(45697),f=n.n(p),d=n(124852),y=n.n(d),m=n(233044),b=n(805346);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function j(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function P(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===g(t)?t:String(t)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(s,e);var t,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(i){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function s(){var e;v(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return P(w(e=a.call.apply(a,[this].concat(n))),"state",{error:!1}),P(w(e),"onImgError",(function(){e.setState((function(){return{error:!0}}))})),P(w(e),"getUrl",(function(e,t){if(e.layer&&"wms"===e.layer.type&&e.layer.url){var n=e.layer,r=c()(t)?l()(n.url)&&Math.floor(Math.random()*n.url.length):t,i=l()(n.url)?n.url[r]:n.url.replace(/[?].*$/g,""),a=o().parse(i),s=(0,m.clearNilValuesForParams)(n.params),p=u()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:e.legendHeight,width:e.legendWidth,layer:n.name,style:n.style||null,version:n.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:e.legendOptions},n.legendParams||{},e.language&&n.localizedLayerStyles?{LANGUAGE:e.language}:{},(0,m.addAuthenticationToSLD)(s||{},e.layer),s&&s.SLD_BODY?{SLD_BODY:s.SLD_BODY}:{},e.scales&&e.currentZoomLvl&&e.scaleDependent?{SCALE:Math.round(e.scales[e.currentZoomLvl])}:{});return(0,m.addAuthenticationParameter)(i,p),o().format({host:a.host,protocol:a.protocol,pathname:a.pathname,query:p})}return""})),P(w(e),"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return t=s,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?y().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):y().createElement(b.Z,{msgId:"layerProperties.legenderror"})}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(y().Component);P(C,"propTypes",{layer:f().object,legendHeight:f().number,legendWidth:f().number,legendOptions:f().string,style:f().object,currentZoomLvl:f().number,scales:f().array,scaleDependent:f().bool,language:f().string}),P(C,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const N=C},807472:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(727418),o=n.n(r),i=n(45697),l=n.n(i),a=n(124852),c=n.n(a),s=n(485294),u=n.n(s),p=n(472986),f=n.n(p),d=n(805346);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function O(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function E(e,t,n){return(t=P(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===y(t)?t:String(t)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,n,r,i,l=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(i){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function a(){var e;g(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(j(e=l.call.apply(l,[this].concat(n))),"renderLoading",(function(){return e.props.maskLoading?c().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},c().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},c().createElement(d.Z,{msgId:"loading"}),c().createElement(f(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),E(j(e),"renderRole",(function(t){return c().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),E(j(e),"hasRole",(function(t){return c().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),E(j(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return t=a,(n=[{key:"render",value:function(){var e=this,t=c().createElement("div",{id:this.props.id,style:b({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},c().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),c().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?c().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):c().createElement("span",null));console.log(this.props.start);var n=this.props.draggable?c().createElement(u(),{onStop:this.props.handleDrag,defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,r=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?c().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:r,className:"fade in modal "+this.props.containerClassName,role:"dialog"},n):n}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(c().Component);E(S,"propTypes",{id:l().string.isRequired,style:l().object,backgroundStyle:l().object,className:l().string,maskLoading:l().bool,containerClassName:l().string,headerClassName:l().string,bodyClassName:l().string,footerClassName:l().string,onClickOut:l().func,modal:l().bool,start:l().object,draggable:l().bool,bounds:l().oneOfType([l().string,l().object])}),E(S,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const C=S},532425:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(45697),o=n.n(r),i=n(124852),l=n.n(i);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){return e>100?"full":e>40?"medium":"small"},f=function(e){var t=e.size,n=e.style,r=void 0===n?{}:n,o=e.className,i=e.hidden;return l().createElement("div",{className:o,style:s({width:t,height:t,overflow:"hidden"},r)},!i&&l().createElement("div",{className:"mapstore-".concat(p(t),"-size-loader")}))};f.propTypes={size:o().number,className:o().string,style:o().object};const d=f},975480:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(124852),o=n.n(r);const i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{display:"inline-block"}:t;return o().createElement("div",{style:n,className:"mapstore-inline-loader"})}},694745:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(124852),o=n.n(r),i=n(294184),l=n.n(i),a=n(757588),c=n(807472),s=n(80717),u=n(867076),p=n(819081),f=n.n(p),d=n(975480),y={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},m={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};const b=(0,u.withState)("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,n=void 0!==t&&t,r=e.handleDrag,i=e.start,u=e.loading,p=e.loadingText,b=e.onClose,g=void 0===b?function(){}:b,v=e.title,h=void 0===v?"":v,O=e.clickOutEnabled,j=void 0===O||O,w=e.showClose,E=void 0===w||w,P=e.disabledClose,S=void 0!==P&&P,C=e.showFullscreen,N=void 0!==C&&C,L=e.fullscreenType,k=void 0===L?"full":L,_=e.buttons,x=void 0===_?[]:_,Z=e.size,D=void 0===Z?"":Z,R=e.bodyClassName,T=void 0===R?"":R,z=e.children,I=e.draggable,B=void 0!==I&&I,W=e.fullscreenState,A=e.onFullscreen,G=e.fade,H=void 0!==G&&G,M=e.fitContent,F=e.modalClassName,U=void 0===F?"":F,q=e.dialogClassName,V=void 0===q?"":q,X=e.enableFooter,Y=void 0===X||X,$=y[D]||"",J=N&&"expanded"===W&&m.className[k]||"",K=n?o().createElement("div",{className:"modal-fixed ".concat(U," ")+(B?"ms-draggable":"")},o().createElement(c.Z,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:j?g:function(){},containerClassName:"ms-resizable-modal",draggable:B,handleDrag:r,start:i,modal:!0,className:l()("modal-dialog modal-content",$,J,V,{"ms-fit-content":M})},o().createElement("span",{role:"header"},o().createElement("h4",{className:"modal-title"},o().createElement("div",{className:"ms-title"},h),N&&m.className[k]&&o().createElement(a.Glyphicon,{className:"ms-header-btn",onClick:function(){return A("expanded"===W?"collapsed":"expanded")},glyph:m.glyph[W][k]}),E&&g&&o().createElement(a.Glyphicon,{glyph:"1-close",className:"ms-header-btn",onClick:g,disabled:S}))),o().createElement("div",{role:"body",className:T},z),Y&&o().createElement("div",{style:{display:"flex"},role:"footer"},o().createElement("div",{className:"ms-resizable-modal-loading-spinner-container"},u?o().createElement(d.Z,null):null),o().createElement("div",{className:"ms-resizable-modal-loading-text"},u?p:null),o().createElement(s.Z,{buttons:x})))):null;return H?o().createElement(f(),{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},K):K}))},212610:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(124852),o=n.n(r),i=n(867076),l=n(957557),a=n.n(l),c=n(815135);const s=(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disabled,n=e.noTooltipWhenDisabled,r=void 0!==n&&n;return!(r&&t)}),c.Z,(function(e){return function(t){return o().createElement(e,a()(t,["tooltipId","tooltip","noTooltipWhenDisabled"]),t.children)}}))},617252:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(124852),o=n.n(r),i=n(867076),l=n(45697),a=n.n(l),c=n(957557),s=n.n(c),u=n(757588),p=n(950966);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function v(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===f(t)?t:String(t)}const O=(0,i.branch)((function(e){return e.popover}),(function(e){var t;return t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(f,t);var n,r,l,a,c=(l=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(l);if(a){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function f(){return d(this,f),c.apply(this,arguments)}return n=f,(r=[{key:"renderPopover",value:function(){return o().createElement(u.Popover,s()(this.props.popover,["trigger","placement","text"]),this.props.popover.text)}},{key:"renderContent",value:function(){var t=(0,i.toClass)(e);return o().createElement(t,s()(this.props,["popover"]))}},{key:"render",value:function(){var e=!0===this.props.popover.trigger?["hover","focus"]:this.props.popover.trigger;return o().createElement("span",null,o().createElement(p.Z,{trigger:e,placement:this.props.popover.placement,overlay:this.renderPopover()},this.renderContent()))}}])&&y(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),f}(o().Component),v(t,"propTypes",{popover:a().object}),v(t,"defaultProps",{popover:{trigger:!0}}),t}))},80717:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(124852),o=n.n(r),i=n(819081),l=n.n(i),a=n(757588),c=n(90085),s=["visible","Element","renderButton"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buttons,n=void 0===t?[]:t,r=e.btnGroupProps,i=void 0===r?{}:r,f=e.btnDefaultProps,d=void 0===f?{}:f,y=e.transitionProps,m=void 0===y?{transitionName:"toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300}:y,b=function(){return n.map((function(e,t){var n=e.visible,r=void 0===n||n,i=e.Element,l=e.renderButton,a=p(e,s);return r?l||i&&o().createElement(i,u({key:a.key||t},a))||o().createElement(c.Z,u({key:a.key||t},d,a)):null}))};return o().createElement(a.ButtonGroup,i,m?o().createElement(l(),m,b()):b())}},90085:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(124852),o=n.n(r),i=n(867076),l=n(805346),a=n(957557),c=n.n(a),s=n(757588),u=n(532425),p=n(212610),f=n(617252),d=n(282467),y=["glyph","loading","text","textId","glyphClassName","loaderProps","children"];function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const g=(0,i.compose)(p.Z,f.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.glyph,n=e.loading,r=e.text,i=void 0===r?"":r,a=e.textId,p=e.glyphClassName,f=void 0===p?"":p,g=e.loaderProps,v=void 0===g?{}:g,h=e.children,O=b(e,y);return o().createElement(d.Z,c()(O,["pullRight","confirmNo","confirmYes"]),t&&!n?o().createElement(s.Glyphicon,{glyph:t,className:f}):null,a?o().createElement(l.Z,{msgId:a}):i,n?o().createElement(u.Z,m({className:"ms-loader".concat(O.bsStyle&&" ms-loader-"+O.bsStyle||"").concat(O.bsSize&&" ms-loader-"+O.bsSize||"")},v)):null,h)}))},549534:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>E});var r=n(124852),o=n.n(r),i=n(322843),l=n(227361),a=n.n(l),c=n(757588),s=n(694745),u=n(262770),p=n(950966),f=n(282467),d=n(805346),y=n(199914),m=n(893379),b=n.n(m),g=n(968035);b()(g.Z,{insert:"head",singleton:!1}),g.Z.locals;var v=n(801550);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}console.log(h(v.rX));function O(e){var t=e.layer;return o().createElement("div",null,o().createElement("p",null,o().createElement("b",null,t.title)),o().createElement("p",null,t.description))}var j=(0,i.$j)((function(e){return{layers:(0,y.Bi)(e),collectiveLegend:a()(e,"map.present.collectiveLegend"),legendPosition:a()(e,"map.present.legendPosition"),styleeditor:(0,y.n4)(e)}}),{saveLegend:v.rX,saveLegendPosition:v.k1})((function(e){var t,n;if(e&&e.legendPosition){var r=document.getElementById("ms-container"),i=r.clientWidth-500,l=.285*r.clientHeight;t=e.legendPosition.xratio*i-i/2,n=(e.legendPosition.yratio-.117)/(.402-.117)*l-l/2}return e.collectiveLegend&&e.layers?o().createElement(o().Fragment,{className:"modal"},o().createElement(s.Z,{title:"Gemeinsame Legende aller sichtbarer Layer",show:open,onClose:function(){return e.saveLegend(!e.collectiveLegend)},draggable:!0,clickOutEnabled:!1,modal:!0,fitContent:!0,dialogClassName:"floaty",handleDrag:function(){!function(e){var t=document.getElementById("ms-container"),n=t.clientWidth-500,r=t.clientHeight,o=document.getElementById("ms-resizable-modal").getBoundingClientRect(),i=o.left/n,l=o.top/r,a={xratio:i,yratio:l};console.log(r,o.top,l),e.saveLegendPosition(a)}(e)},start:{x:t,y:n}},o().createElement("div",{className:"collectiveLegendModal"},e.layers.length>0?e.layers.reverse().map((function(t){return t.visibility?o().createElement("div",{className:"legendLayer"},e.styleeditor&&e.styleeditor.service?o().createElement(O,{layer:t,editor:e.styleeditor}):null,o().createElement(u.Z,{node:t})):null})):null,o().createElement("div",{className:"closeButton"},o().createElement(f.Z,{onClick:function(){return e.saveLegend(!e.collectiveLegend)}},o().createElement(d.Z,{msgId:"close"})))))):null})),w=(0,i.$j)((function(e){return{collectiveLegend:a()(e,"map.present.collectiveLegend")}}),{saveLegend:v.rX})((function(e){function t(){e.saveLegend(!e.collectiveLegend)}return e&&e.collectiveLegend?o().createElement(p.Z,{key:"collectiveLegend",placement:"top",overlay:o().createElement(c.Tooltip,{id:"toc-tooltip-collectiveLegend"},"Hide collective legend")},o().createElement(f.Z,{key:"collectiveLegend",bsStyle:"success",className:"square-button-md",onClick:t},o().createElement(c.Glyphicon,{glyph:"list-alt"}))):o().createElement(p.Z,{key:"collectiveLegend",placement:"top",overlay:o().createElement(c.Tooltip,{id:"toc-tooltip-collectiveLegend"},"Show collective legend")},o().createElement(f.Z,{key:"collectiveLegend",bsStyle:"primary",className:"square-button-md",onClick:t},o().createElement(c.Glyphicon,{glyph:"list-alt"})))}));const E=(0,i.rx)("CollectiveLegend",{component:j,containers:{TOC:{target:"toolbar",Component:w}}})},199914:(e,t,n)=>{"use strict";n.d(t,{Bi:()=>i,Mm:()=>l,n4:()=>c});var r=n(513218),o=n.n(r),i=function(e){return e.layers.flat.filter((function(e){return function(e){if("background"!=e.group)return e}(e)}))},l=function(e){return a(e.layers.groups)},a=function(e){if(Array.isArray(e)){var t=[];return function e(n){n.forEach((function(n){o()(n)&&(t.push(n),n.nodes&&e(n.nodes))}))}(e),t}return[]},c=function(e){return e.styleeditor}},968035:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(923645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".msgapi .collectiveLegendModal {\n  margin-top: 10px;\n  margin-left: 10px;\n  margin-right: 10px;\n}\n\n.msgapi .closeButton {\n  justify-content: flex-end;\n  display: flex;\n}\n\n.msgapi .collectiveLegendHeader {\n  margin-bottom: 5%;\n}\n\n.msgapi .legendLayer {\n  margin-bottom: 5%;\n}\n\n.msgapi .floaty {\n  /*position: absolute !important;\n  left: 1% !important;\n  top: -5% !important;*/\n}\n",""]);const i=o}}]);