(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[69845],{979322:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>m});var i=n(124852),t=n.n(i),u=n(91175),o=n.n(u),l=n(513218),c=n.n(l),a=n(171703),s=n(322843),f=n(199914),y=n(580416);function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=e[n];return i}var p=function(e,r){return e.filter((function(e){return r===e.group}))},v=function(e){var r=0;return e.forEach((function(e){e.visibility&&r++})),r},g=function(e,r,n){for(var i=[],t=function(n){var t=r.filter((function(r){return e[n].id===r.id}))[0];e[n].visibility&&!t.visibility&&i.push(e[n])},u=0;u<e.length;u++)t(u);if(1===i.length){var o=h(n,i[0]);o&&o.exclusiveLayer&&p(e,i[0].group).forEach((function(e){e.id!==i[0].id&&n.updateLayerVisibility(e.id,"layer",{visibility:!1})}))}},h=function(e,r){var n=o()(e.groups.filter((function(e){return c()(e)&&e.id===r.group})));return void 0!==n?n:o()(e.groups.filter((function(e){return c()(e)&&"Default"===e.id})))},b=(0,a.connect)((function(e){return{layers:(0,f.Bi)(e),groups:(0,f.Mm)(e)}}),{updateLayerVisibility:y.tV})((function(e){var r=e.layers,n=e.groups,u=(0,i.useRef)(""),o=function(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,t,u,o,l=[],c=!0,a=!1;try{if(u=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=u.call(n)).done)&&(l.push(i.value),l.length!==r);c=!0);}catch(e){a=!0,t=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(a)throw t}}return l}}(e,r)||function(e,r){if(e){if("string"==typeof e)return d(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,i.useState)(!1),2),l=o[0],c=o[1];(0,i.useEffect)((function(){u.current={layers:r,groups:n}}),[l]);var a=!1;if(window.onclick=function(i){var t,o=i.target;(o.className.includes("glyphicon-record")||o.className.includes("glyphicon-unchecked")||o.className.includes("glyphicon-eye-open")||o.className.includes("glyphicon-eye-close"))&&((t=o,a=t.parentElement.attributes.class.nodeValue.includes("toc-default-group-head")?t.className.includes("glyphicon-eye-open")?{clicked:!0,open:!0}:{clicked:!0,open:!1}:{clicked:!1,open:null}).clicked&&a.open?function(e,r,n){e&&e.forEach((function(e){if(e.exclusiveLayer){var i=p(r,e.id);if(v(i)>1){i=i.reverse(),n.updateLayerVisibility(i[0].id,"layer",{visibility:!0});for(var t=1;t<i.length;t++)n.updateLayerVisibility(i[t].id,"layer",{visibility:!1})}}}))}(n,r,e):function(e,r,n){e&&r.current&&g(n,r.current.layers,e)}(e,u,r),c(!l))},u.current.groups&&n)for(var s=function(i){var t=u.current.groups.filter((function(e){return n[i].id===e.id}))[0];if(t){if(n[i].exclusiveLayer&&!t.exclusiveLayer){var o=p(r,n[i].id);v(o)>1&&o.forEach((function(r){e.updateLayerVisibility(r.id,"layer",{visibility:!1})}))}!function(e,r,n,i){if(e.nodes.length-r.nodes.length==1&&e.exclusiveLayer){var t=p(n,e.id);if(v(t)>1)for(var u=0;u<t.length;u++)i.updateLayerVisibility(t[u].id,"layer",{visibility:!1})}}(n[i],t,r,e)}},f=0;f<n.length;f++)s(f);return t().createElement("div",null)}));const m=(0,s.rx)("ExclusiveLayer",{component:b})},199914:(e,r,n)=>{"use strict";n.d(r,{Bi:()=>u,Mm:()=>o,n4:()=>c});var i=n(513218),t=n.n(i),u=function(e){return e.layers.flat.filter((function(e){return function(e){if("background"!=e.group)return e}(e)}))},o=function(e){return l(e.layers.groups)},l=function(e){if(Array.isArray(e)){var r=[];return function e(n){n.forEach((function(n){t()(n)&&(r.push(n),n.nodes&&e(n.nodes))}))}(e),r}return[]},c=function(e){return e.styleeditor}}}]);