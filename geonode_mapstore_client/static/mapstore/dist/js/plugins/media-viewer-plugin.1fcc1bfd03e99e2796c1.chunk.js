(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[92184],{892761:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>M});var r=t(124852),i=t.n(r),o=t(322843),u=t(882017),a=t(532425),c=t(375875),l=t.n(c),f=["jpg","jpeg","png"],s=["mp4","mpg","avi","m4v","mp2","3gp","flv","vdo","afl","mpga","webm"],d=["glb","gltf"],p=["pcd"];function m(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,u,a=[],c=!0,l=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(e){if("string"==typeof e)return v(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var g=t(991288),b=t(535721),y=["resource"];function h(){return h=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},h.apply(this,arguments)}var w=(0,r.lazy)((function(){return Promise.all([t.e(80813),t.e(4333)]).then(t.bind(t,504333))})),O={image:u.ZP,video:u.ZP,pdf:function(e){var n=e.src,t=m((0,r.useState)(null),2),o=t[0],u=t[1],c=m((0,r.useState)(!1),2),f=c[0],s=c[1];return(0,r.useEffect)((function(){s(!0),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/pdf";return l().get(e,{responseType:"blob"}).then((function(e){var t=e.data,r=new Blob([t],{type:n});return URL.createObjectURL(r)}))}(n).then((function(e){s(!1),u(e)})).finally((function(){s(!1)}))}),[]),f?i().createElement("div",{className:"pdf-loader"},i().createElement(a.Z,{size:70})):i().createElement("iframe",{className:"gn-pdf-viewer",type:"application/pdf",frameBorder:"0",scrolling:"auto",height:"100%",width:"100%",src:o})},gltf:w,pcd:w,unsupported:function(){return i().createElement(g.Z,{msgId:"gnhome.noPreview",icon:"file"})}},E={video:{mode:"view",inView:!0,fit:"contain"},image:{fit:"contain",enableFullscreen:!0,loaderComponent:function(){return i().createElement("div",{className:"pdf-loader"},i().createElement(a.Z,{size:70}))}},pdf:{},unsupported:{}};const j=function(e){var n,t=e.resource,o=function(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}(e,y),u=(0,b.NN)(),a=(t&&(u[t.subtype]||u[t.resource_type])||{}).canPreviewed,c=(null==t?void 0:t.pk)&&a&&a(t);if(t&&c){var l="pdf"===(n=t.extension)?"pdf":f.includes(n)?"image":s.includes(n)?"video":d.includes(n)?"gltf":p.includes(n)?"pcd":"unsupported",m=O[l];return i().createElement(r.Suspense,{fallback:null},i().createElement(m,h({mediaType:l},E[l],o[l],{description:t.abstract,id:t.pk,thumbnail:function(){return(0,b.Ql)(null==t?void 0:t.thumbnail_url)},src:t.href})))}return i().createElement(g.Z,{msgId:"gnhome.permissionsMissing"})};var T=t(171703),x=t(22222),P=t(572036),S=(0,T.connect)((0,x.P1)([function(e){var n;return(null==e||null===(n=e.gnresource)||void 0===n?void 0:n.data)||null},function(e){var n;return(null==e||null===(n=e.gnresource)||void 0===n?void 0:n.loading)||!1}],(function(e,n,t){return{resource:e,loading:n,editMode:t}})))(j),k=(0,T.connect)((0,x.P1)([],(function(){return{}})),{})((function(e){return i().createElement("div",{className:"gn-media-viewer"},i().createElement(S,e))}));const M=(0,o.rx)("MediaViewer",{component:k,containers:{},epics:{},reducers:{gnresource:P.Z}})},945177:(e,n,t)=>{"use strict";var r=t(595318);n.__esModule=!0,n.default=void 0;var i,o=r(t(250139)),u="clearTimeout",a=function(e){var n=(new Date).getTime(),t=Math.max(0,16-(n-l)),r=setTimeout(e,t);return l=n,r},c=function(e,n){return e+(e?n[0].toUpperCase()+n.substr(1):n)+"AnimationFrame"};o.default&&["","webkit","moz","o","ms"].some((function(e){var n=c(e,"request");if(n in window)return u=c(e,"cancel"),a=function(e){return window[n](e)}}));var l=(new Date).getTime();(i=function(e){return a(e)}).cancel=function(e){window[u]&&"function"==typeof window[u]&&window[u](e)};var f=i;n.default=f,e.exports=n.default},23279:(e,n,t)=>{var r=t(513218),i=t(707771),o=t(14841),u=Math.max,a=Math.min;e.exports=function(e,n,t){var c,l,f,s,d,p,m=0,v=!1,g=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(n){var t=c,r=l;return c=l=void 0,m=n,s=e.apply(r,t)}function h(e){return m=e,d=setTimeout(O,n),v?y(e):s}function w(e){var t=e-p;return void 0===p||t>=n||t<0||g&&e-m>=f}function O(){var e=i();if(w(e))return E(e);d=setTimeout(O,function(e){var t=n-(e-p);return g?a(t,f-(e-m)):t}(e))}function E(e){return d=void 0,b&&c?y(e):(c=l=void 0,s)}function j(){var e=i(),t=w(e);if(c=arguments,l=this,p=e,t){if(void 0===d)return h(p);if(g)return clearTimeout(d),d=setTimeout(O,n),y(p)}return void 0===d&&(d=setTimeout(O,n)),s}return n=o(n)||0,r(t)&&(v=!!t.leading,f=(g="maxWait"in t)?u(o(t.maxWait)||0,n):f,b="trailing"in t?!!t.trailing:b),j.cancel=function(){void 0!==d&&clearTimeout(d),m=0,c=p=l=d=void 0},j.flush=function(){return void 0===d?s:E(i())},j}},707771:(e,n,t)=>{var r=t(555639);e.exports=function(){return r.Date.now()}}}]);