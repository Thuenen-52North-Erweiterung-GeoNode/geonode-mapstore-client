(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[96336],{807878:(e,t,r)=>{"use strict";r.d(t,{E6:()=>i,vo:()=>u,l1:()=>c,J9:()=>f,U:()=>l,z8:()=>s,ql:()=>p,O_:()=>y,M$:()=>d,Ug:()=>g,p5:()=>b,Fz:()=>v,WZ:()=>m,bP:()=>O,On:()=>w,d_:()=>h,xM:()=>S,bl:()=>E,Wi:()=>T,PN:()=>F,_M:()=>P,Wm:()=>_,Eg:()=>M,V1:()=>A,cY:()=>I,RD:()=>j,Hl:()=>D,co:()=>x,uY:()=>R,H8:()=>L,je:()=>C,go:()=>k,_8:()=>G,xd:()=>N,o7:()=>U,Nr:()=>V,Gf:()=>Y,nh:()=>H,Rf:()=>B,Xp:()=>z,D6:()=>W,Sm:()=>Q,Ef:()=>$,jW:()=>X,kQ:()=>Z,JG:()=>q,js:()=>K,q$:()=>J,OZ:()=>ee,Nc:()=>te,NV:()=>re,I5:()=>ne,QL:()=>oe,I:()=>ae,ku:()=>ie,EU:()=>ue,IV:()=>ce,HT:()=>fe,lg:()=>le,ds:()=>se,VF:()=>pe,DD:()=>ye,uo:()=>de,Ry:()=>ge,ZH:()=>be,AQ:()=>ve,yC:()=>me,F:()=>Oe,mc:()=>we,uM:()=>Se,eJ:()=>Ee,uP:()=>Te,N5:()=>Fe,bn:()=>Pe,Bm:()=>_e,F2:()=>Me,jR:()=>Ae,$J:()=>Ie,ln:()=>je});var n=r(375875),o=r.n(n);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var i="ADD_FILTER_FIELD",u="REMOVE_FILTER_FIELD",c="UPDATE_FILTER_FIELD",f="UPDATE_EXCEPTION_FIELD",l="ADD_GROUP_FIELD",s="UPDATE_LOGIC_COMBO",p="REMOVE_GROUP_FIELD",y="CHANGE_CASCADING_VALUE",d="EXPAND_ATTRIBUTE_PANEL",g="EXPAND_SPATIAL_PANEL",b="QUERYFORM:EXPAND_CROSS_LAYER",v="QUERYFORM:SET_CROSS_LAYER_PARAMETER",m="QUERYFORM:RESET_CROSS_LAYER_FILTER",O="SELECT_SPATIAL_METHOD",w="SELECT_VIEWPORT_SPATIAL_METHOD",h="UPDATE_GEOMETRY",S="SELECT_SPATIAL_OPERATION",E="CHANGE_SPATIAL_ATTRIBUTE",T="CHANGE_SPATIAL_FILTER_VALUE",F="REMOVE_SPATIAL_SELECT",P="SHOW_SPATIAL_DETAILS",_="QUERY_FORM_SEARCH",M="QUERY_FORM_RESET",A="SHOW_GENERATED_FILTER",I="CHANGE_DWITHIN_VALUE",j="ZONE_SEARCH",D="ZONE_SEARCH_ERROR",x="ZONE_FILTER",R="ZONE_CHANGE",L="ZONES_RESET",C="SIMPLE_FILTER_FIELD_UPDATE",k="ADD_SIMPLE_FILTER_FIELD",G="REMOVE_SIMPLE_FILTER_FIELD",N="REMOVE_ALL_SIMPLE_FILTER_FIELDS",U="UPDATE_FILTER_FIELD_OPTIONS",V="LOADING_FILTER_FIELD_OPTIONS",Y="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",H="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",B="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",z="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD_OPTIONS",W="SET_AUTOCOMPLETE_MODE",Q="TOGGLE_AUTOCOMPLETE_MENU",$="QUERYFORM:LOAD_FILTER";function X(e){return{type:i,groupId:e}}function Z(e,t){return{type:l,groupId:e,index:t}}function q(e){return{type:u,rowId:e}}function K(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField";return{type:Q,rowId:e,status:t,layerFilterType:r}}function J(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:c,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}}function ee(e,t){return{type:f,rowId:e,exceptionMessage:t}}function te(e,t){return{type:s,groupId:e,logic:t}}function re(e){return{type:W,status:e}}function ne(e){return{type:p,groupId:e}}function oe(e){return{type:y,attributes:e}}function ae(e){return{type:d,expand:e}}function ie(e){return{type:g,expand:e}}function ue(e){return{type:b,expand:e}}function ce(e,t){return{type:v,key:e,value:t}}function fe(e,t){return{type:O,fieldName:t,method:e}}function le(){return{type:w}}function se(e){return{type:h,geometry:e}}function pe(e,t){return{type:S,fieldName:t,operation:e}}function ye(e){return{type:E,attribute:e}}function de(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.srsName,n=e.collectGeometries,o=e.style,a=e.options,i=e.value;return{type:T,value:i,collectGeometries:n,options:a,geometry:t&&t.geometry,feature:t,srsName:r,style:o}}function ge(){return{type:F}}function be(e){return{type:P,show:e}}function ve(e){return{type:I,distance:e}}function me(e,t){return{type:_,searchUrl:e,filterObj:t}}function Oe(e){return{type:$,filter:e}}function we(e){return{type:M,skip:e}}function he(e,t){return{type:D,error:e,id:t}}function Se(e,t){return{type:j,active:e,id:t}}function Ee(e,t,r){return function(n){return o().post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then((function(o){var i=o.data;if("object"!==a(i))try{i=JSON.parse(i)}catch(o){n(he("Search result broken ("+e+":   "+t+"): "+o.message,r))}n(function(e,t){return{type:x,data:e,id:t}}(i,r)),n(Se(!1,r))})).catch((function(e){n(he(e,r))}))}}function Te(e,t){return{type:R,id:e,value:t}}function Fe(e){return{type:Y,rowId:(new Date).getTime(),groupId:e}}function Pe(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:H,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}}function _e(e){return{type:B,rowId:e}}function Me(){return{type:m}}function Ae(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filterField";return{type:V,status:e,filterField:t,layerFilterType:r}}function Ie(e,t,r){return{type:U,filterField:e,options:t,valuesCount:r}}function je(e,t,r){return{type:z,filterField:e,options:t,valuesCount:r}}},218291:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(124852),o=r.n(n);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}const i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.fallback,i=void 0===r?null:r;return function(t){return(0,n.forwardRef)((function(r,u){return void 0===e||e(r)?o().createElement(n.Suspense,{fallback:i},o().createElement(t,a({ref:u},r))):null}))}}},622854:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Gt});var n={};r.r(n),r.d(n,{activateBoxSelectionTool:()=>Me,activateGeometryFilter:()=>Re,activateTemporaryChangesEpic:()=>je,askChangesConfirmOnFeatureGridClose:()=>Je,autoCloseFeatureGridEpicOnDrowerOpen:()=>Ke,autoReopenFeatureGridOnFeatureInfoClose:()=>nt,closeFeatureGridOnDrawingToolOpen:()=>Be,closeIdentifyWhenOpenFeatureGrid:()=>ut,closeRightPanelOnFeatureGridOpen:()=>He,deactivateBoxSelectionTool:()=>Ae,deactivateGeometryFilter:()=>xe,deactivateSyncWmsFilterOnFeatureGridClose:()=>lt,deleteGeometryFeature:()=>We,deleteSelectedFeatureGridFeatures:()=>Ne,disableMultiSelect:()=>Fe,enableGeometryFilterOnEditMode:()=>Te,featureGridBrowseData:()=>ve,featureGridChangePage:()=>Le,featureGridLayerSelectionInitialization:()=>me,featureGridReloadPageOnSaveSuccess:()=>Ce,featureGridSort:()=>we,featureGridStartupQuery:()=>Oe,featureGridUpdateGeometryFilter:()=>he,featureGridUpdateTextFilters:()=>Ee,handleBoxSelectionDrawEnd:()=>_e,handleClickOnMap:()=>Pe,handleDrawFeature:()=>Ve,handleEditFeature:()=>Ue,handleGeometryFilterActivation:()=>De,hideDrawerOnFeatureGridOpenMobile:()=>gt,hideFeatureGridOnDrawerOpenMobile:()=>dt,launchUpdateFilterEpic:()=>Se,onClearChangeConfirmedFeatureGrid:()=>et,onCloseFeatureGridConfirmed:()=>tt,onFeatureGridCreateNewFeature:()=>$e,onFeatureGridGeometryEditing:()=>ze,onFeatureGridZoomAll:()=>at,onOpenAdvancedSearch:()=>ot,removeWmsFilterOnGridClose:()=>rt,replayOnTimeDimensionChange:()=>yt,resetControlsOnEnterInEditMode:()=>it,resetEditingOnFeatureGridClose:()=>Ye,resetGridOnLocationChange:()=>Ze,resetQueryPanel:()=>qe,resetSnappingLayerOnFeatureGridClosed:()=>vt,savePendingFeatureGridChanges:()=>Ge,selectFeaturesOnMapClickResult:()=>Ie,setDefaultSnappingLayerOnFeatureGridOpen:()=>bt,setHighlightFeaturesPath:()=>Xe,startSyncWmsFilter:()=>ct,stopSyncWmsFilter:()=>ft,syncMapWmsFilter:()=>st,toggleSnappingOffOnFeatureGridViewMode:()=>mt,triggerDrawSupportOnSelectionChange:()=>Qe,updateSelectedOnSaveOrCloseFeatureGrid:()=>ke,virtualScrollLoadFeatures:()=>pt});var o=r(124852),a=r(171703),i=r(22222),u=r(322843),c=r(49977),f=r.n(c),l=r(227361),s=r.n(l),p=r(91175),y=r.n(p),d=r(441609),g=r.n(d),b=r(313311),v=r.n(b),m=r(984596),O=r.n(m),w=r(264721),h=r.n(w),S=r(354061),E=r.n(S),T=r(275982),F=r(375875),P=r.n(F),_=r(813292),M=r.n(_),A=r(834387),I=r(196958),j=r(737295),D=r.n(j),x=r(604206),R=r(750937),L=r.n(R),C=r(378889),k=r(921914),G=r(95797),N=r(807878),U=r(801550),V=r(41156),Y=r(800827),H=r(580416),B=r(433528),z=r(782904),W=r(607147),Q=r(129386),$=r(731255),X=r(197395),Z=r(824260),q=r(510284),K=r(469842),J=r(120096),ee=r(47805),te=r(896309),re=r(552259),ne=r(55105),oe=r(998869);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ie(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ae(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===ae(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.page,n=t.size,o=(0,$.Vf)(e),a=void 0!==n?n:o.size;return{startIndex:void 0!==r?r*a:o.page*a,maxFeatures:a}},pe=function(e,t){return fe(fe({},e),{},{pagination:t})},ye=function(e,t,r){var n=r.insert,o=r.update,a=r.propertyChange,i=r.getPropertyName;return(0,r.transaction)(t.map((function(e){return n(e)})),Object.keys(e).map((function(t){return Object.keys(e[t]).map((function(r){return o([a(i(r),e[t][r]),(0,A.fidFilter)("ogc",t)])}))})))},de=function(e,t){return f().Observable.defer((function(){return P().post(e,t,{headers:{"Content-Type":"application/xml"}})})).let(q.oB)},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featuregrid;return(0,H.He)(t.selectedLayer,{filterObj:void 0})},be=function(e){return function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.update,o=void 0===n?{}:n,a=r.append,i=(0,$.Li)(e.getState()),u=i.id,c=fe({},s()(e.getState(),'featuregrid.advancedFilters["'.concat(u,'"]')));if(c){var f=(0,$.M0)(e.getState())||{},l=E()(f,(function(e,t,r){return(0,I.dJ)(fe({attribute:r},t),e)}),{}),p="AND";l.spatialField&&(c.spatialField=void 0,p=l.spatialFieldOperator);var y=(0,ee.composeAttributeFilters)([c,l],"AND",p),d=fe(fe({},c),y);return(0,G.rh)({updates:d,reason:null==o?void 0:o.type})}var g=o;return a&&null!=o&&o.attribute&&(g=(0,$.M0)(e.getState())[null==o?void 0:o.attribute]),(0,G.rh)({updates:(0,I.dJ)(g,(0,Z.X1)(e.getState())),reason:null===(t=g)||void 0===t?void 0:t.type})}},ve=function(e,t){return e.ofType(H.R8).switchMap((function(r){var n,o=r.layer,a=s()(t.getState(),"query.typeName");return(n=f().Observable).of.apply(n,ie(a!==o.name?[(0,N.mc)()]:[]).concat([(0,z.Xg)("drawer","enabled",!1),(0,B.uF)(o.id),(0,B.t9)()])).merge(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.url,o=r.name,a=r.id,i=s()(t.getState(),'featuregrid.advancedFilters["'.concat(a,'"]')),u=function(){return(0,G.rP)(n,i||{featureTypeName:o,filterType:"OGC",ogcVersion:"1.1.0"})};return f().Observable.of((0,G.gT)(n,o)).merge(e.ofType(G.u7).filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).typeName===o})).map(u))}(e,t,o))}))},me=function(e){return e.ofType(G.DR).switchMap((function(e){return f().Observable.of((0,B.uF)(e.id))}))},Oe=function(e,t){return e.ofType(G.Yx).switchMap((function(){return f().Observable.of((0,B.oO)(0)).concat((0,$.eK)(t.getState())===B.EH.VIEW?f().Observable.of((0,B.nY)()):f().Observable.empty())}))},we=function(e,t){return e.ofType(B.dY).switchMap((function(r){var n=r.sortBy,o=r.sortOrder;return f().Observable.of((0,G.IO)((0,Z.Bu)(t.getState()),pe(fe(fe({},(0,Z.X1)(t.getState())),{},{sortOptions:{sortBy:n,sortOrder:o}}),se(t.getState())),(0,$.TC)(t.getState()))).merge(e.ofType(G.Hu).map((function(e){return(0,B.UB)(s()(e,"result.features",[]),[s()(e,"filterObj.pagination.startIndex")])})).takeUntil(e.ofType(G.VT)).take(1))}))},he=function(e,t){return e.ofType(B.$O).switchMap((function(){var r,n=null===(r=(0,$.Vf)(t.getState()))||void 0===r?void 0:r.size;return e.ofType(B._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled&&!r.value})).switchMap((function(){var r=!1;return e.ofType(B._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled&&!r.deactivated})).switchMap((function(e,n){return 0===n?(r=!0,f().Observable.from([(0,B.Jr)(1e5),(0,B.KD)([]),be(t)(e)])):f().Observable.of(be(t)(e))})).takeUntil(f().Observable.merge(e.ofType(B._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})),e.ofType(B.sF,T.nk))).merge(e.ofType(B._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})).take(1).switchMap((function(e){return r?f().Observable.of((0,B.Jr)(n),be(t)(e)):f().Observable.of(be(t)(e))})).takeUntil(e.ofType(B.sF,T.nk))).merge(e.ofType(B.sF,T.nk).take(1).switchMap((function(){var e,o=(0,B.a8)({attribute:null===(e=(0,C.findGeometryProperty)((0,Z.Qs)(t.getState())))||void 0===e?void 0:e.name,enabled:!1,type:"geometry"});return r?f().Observable.of((0,B.Jr)(n),o,(0,B.pP)(o)):f().Observable.of(o,(0,B.pP)(o))})))}))}))},Se=function(e,t){return e.ofType(B.iB).switchMap((function(e){return f().Observable.of(be(t)(e.updateFilterAction))}))},Ee=function(e,t){return e.ofType(G.Yx).switchMap((function(){return e.ofType(B._u).filter((function(e){var t=e.update;return"geometry"!==(void 0===t?{}:t).type})).map(be(t))}))},Te=function(e,t){return e.ofType(B.aO).filter((function(){return(0,$.eK)(t.getState())===B.EH.EDIT})).switchMap((function(){return(v()((0,$.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{}).value?f().Observable.empty():f().Observable.of((0,B.a8)({attribute:(0,C.findGeometryProperty)((0,Z.Qs)(t.getState())).name,enabled:!0,type:"geometry"}))}))},Fe=function(e){return e.ofType(B._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})).switchMap((function(){return f().Observable.of((0,B.dq)({multiselect:!1}))}))},Pe=function(e,t){return e.ofType(B._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled})).switchMap((function(){return e.ofType(U.TR).switchMap((function(e){var r,n=e.point,o=n.latlng,a=n.pixel,i=n.modifiers,u=i.ctrl,c=i.metaKey,l=v()((0,$.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{},p=(0,Y.uy)(t.getState()),y=te.default.reproject([o.lng,o.lat],"EPSG:4326",p),d=re.default.getHook(re.default.GET_COORDINATES_FROM_PIXEL_HOOK),g=te.default.calculateCircleRadiusFromPixel(d,a,y,4);return l.deactivated?f().Observable.empty():f().Observable.of((0,B.dq)({multiselect:null!==(r=u||c)&&void 0!==r&&r}),(0,B.a8)(fe(fe({},l),{},{value:{attribute:l.attribute||s()((0,K.vE)(t.getState()),"attribute"),geometry:{center:[y.x,y.y],coordinates:te.default.calculateCircleCoordinates(y,g,12),extent:[y.x-g,y.y-g,y.x+g,y.y+g],projection:p,radius:g,type:"Polygon"},method:"Circle",operation:"INTERSECTS"}}),u||c))})).takeUntil(f().Observable.merge(e.ofType(B._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})),e.ofType(T.nk)))}))},_e=function(e,t){return e.ofType(B._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled})).switchMap((function(){return e.ofType(V.fy).switchMap((function(e){var r,n=e.boxEndInfo,o=n.boxExtent,a=n.modifiers,i=a.ctrl,u=a.metaKey,c=te.default.getPolygonFromExtent(o),l=(0,Y.uy)(t.getState()),p=v()((0,$.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{};return p.deactivated?f().Observable.empty():f().Observable.of((0,B.dq)({multiselect:null!==(r=i||u)&&void 0!==r&&r}),(0,B.a8)(fe(fe({},p),{},{value:{geometry:fe(fe({},c.geometry),{},{projection:l}),attribute:p.attribute||s()((0,K.vE)(t.getState()),"attribute"),method:"Rectangle",operation:"INTERSECTS"}}),i||u))})).takeUntil(f().Observable.merge(e.ofType(B._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}))))}))},Me=function(e){return e.ofType(B._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled})).switchMap((function(){return f().Observable.of((0,V.ZR)("start"))}))},Ae=function(e){return f().Observable.merge(e.ofType(B._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})),e.ofType(B.sF)).switchMap((function(){return f().Observable.of((0,V.ZR)("end"))}))},Ie=function(e,t){return e.ofType(G.Hu).filter((function(e){return"geometry"===e.reason})).switchMap((function(e){var r=e.result,n=s()(r,"features"),o=(0,$.gz)(t.getState()),a=v()((0,$.M0)(t.getState()),(function(e){return"geometry"===e.type}));return f().Observable.of((0,B.KD)(n.length>0&&a&&a.value?ie(n):[],o))}))},je=function(e){return e.ofType(B.VV).flatMap((function(e){var t=e.activated;return f().Observable.of((0,B.YG)(t),(0,B.VH)(t))}))},De=function(e,t){return e.ofType(B._9).flatMap((function(){var e=v()((0,$.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{},r=(0,$.LB)(t.getState()),n=(0,$.b4)(t.getState());return f().Observable.of((0,B.a8)(fe(fe({},e),{},{type:"geometry",attribute:e.attribute||s()((0,K.vE)(t.getState()),"attribute"),deactivated:!(!r&&!n&&e.deactivated)})))}))},xe=function(e,t){return f().Observable.merge(e.ofType(B.IN,x.DI,B.JB,B.K8),e.ofType(B.B8).filter((function(e){return!!e.deactivated}))).flatMap((function(){var e=v()((0,$.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{};return e.deactivated?f().Observable.empty():f().Observable.of((0,B.a8)(fe(fe({},e),{},{type:"geometry",attribute:e.attribute||s()((0,K.vE)(t.getState()),"attribute"),deactivated:!0})))}))},Re=function(e,t){return f().Observable.merge(e.ofType(B.AY,B.yi),e.ofType(B.B8).filter((function(e){return!e.deactivated}))).flatMap((function(){var e=v()((0,$.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{},r=(0,$.LB)(t.getState()),n=(0,$.b4)(t.getState());return!e.deactivated||r||n?f().Observable.empty():f().Observable.of((0,B.a8)(fe(fe({},e),{},{type:"geometry",attribute:e.attribute||s()((0,K.vE)(t.getState()),"attribute"),deactivated:!1})))}))},Le=function(e,t){return e.ofType(B.gG).merge(e.ofType(G.VN).debounceTime(500).map((function(e){return fe(fe({},e),{},{page:0})}))).switchMap((function(r){return function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=t.size,o=t.reason,a=e.getState();return f().Observable.of((0,G.IO)((0,Z.Bu)(a),pe(fe({},(0,Z.X1)(a)),se(a,{page:r,size:n})),(0,$.TC)(a),o))}}(t)(r).merge(e.ofType(G.Hu).map((function(e){var r=s()(e,"result.features",[]),n=(0,$.gz)(t.getState()),o=v()((0,$.M0)(t.getState()),(function(e){return"geometry"===e.type}));return n&&null!=o&&o.enabled&&(r=(0,$._w)(t.getState())),(0,B.UB)(r,[s()(e,"filterObj.pagination.startIndex")])})).take(1).takeUntil(e.ofType(G.VT)))}))},Ce=function(e,t){return e.ofType(B.AY).switchMap((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.page,o=r.size;return f().Observable.of((0,G.IO)((0,Z.Bu)(t.getState()),pe(fe({},(0,Z.X1)(t.getState())),se(t.getState(),{page:n,size:o})),(0,$.TC)(t.getState())),(0,H.ct)((0,$.u$)(t.getState()))).merge(e.ofType(G.Hu).map((function(e){return f().Observable.of((0,B.$E)(),(0,B.UB)(s()(e,"result.features",[]),[s()(e,"filterObj.pagination.startIndex")]))})).mergeAll().takeUntil(e.ofType(G.VT)).take(2))}))},ke=function(e){return e.ofType(B.AY,B.sF).switchMap((function(){return f().Observable.of((0,B.KD)([]))}))},Ge=function(e,t){return e.ofType(B.zh).switchMap((function(){return f().Observable.of((0,B.fO)()).concat(function(){var e=arguments.length>2?arguments[2]:void 0;return de(arguments.length>3?arguments[3]:void 0,ye(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],L()(e)))}((0,$.ND)(t.getState()),(0,$.kG)(t.getState()),(0,Z.Qs)(t.getState()),(0,Z.Bu)(t.getState())).map((function(){return(0,B.gc)()})).catch((function(e){return f().Observable.of((0,B.cE)(),(0,X.vU)({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError",autoDismiss:5}))})))}))},Ne=function(e,t){return e.ofType(B.Hk).switchMap((function(){return f().Observable.of((0,B.fO)()).concat((e=(0,$._w)(t.getState()),r=(0,Z.Qs)(t.getState()),n=(0,Z.Bu)(t.getState()),de(n,function(e,t){var r=t.transaction,n=t.deleteFeature;return r(e.map(n))}(e,L()(r)))).map((function(){return(0,B.gc)()})).catch((function(e){return f().Observable.of((0,B.cE)(),(0,X.vU)({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError"}))})).concat(f().Observable.of((0,B.Pv)("deleteConfirm"),(0,B.MO)())));var e,r,n}))},Ue=function(e,t){return e.ofType(B.Ub).switchMap((function(){var e=t.getState(),r=(0,Z.Qs)(e),n=(0,I.cZ)(),o=(0,C.findGeometryProperty)(r).localType,a={featureProjection:n,stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},i=D()({},(0,$.P3)(e),{type:"Feature"}),u=(0,$.ND)(e);return u[i.id]&&u[i.id]&&u[i.id].geometry&&(i.geometry=u[i.id].geometry),f().Observable.of((0,x.Yf)("drawOrEdit",o,"featureGrid",[i],a))}))},Ve=function(e,t){return e.ofType(B._9).switchMap((function(){var e=t.getState(),r=(0,Z.Qs)(e),n=(0,I.cZ)(),o=(0,C.findGeometryProperty)(r).localType,a=D()({},(0,$.P3)(e),{type:"Feature"}),i=(0,$.ND)(e);i[a.id]&&(i[a.id].geometry||null===i[a.id].geometry)&&(a.geometry=i[a.id].geometry),a._new&&(a.geometry=y()((0,$.kG)(e)).geometry);var u={featureProjection:n,stopAfterDrawing:!0,editEnabled:!(0,$.Ae)(e),drawEnabled:(0,$.Ae)(e)};return f().Observable.of((0,x.Yf)("drawOrEdit",o,"featureGrid",[a],u))}))},Ye=function(e,t){return e.ofType(B.$O).switchMap((function(){return e.ofType(B.aO).filter((function(){return(0,$.eK)(t.getState())===B.EH.EDIT})).take(1).switchMap((function(){return e.ofType(T.nk,B.sF).take(1).switchMap((function(){return f().Observable.of((0,x.bp)())}))}))}))},He=function(e,t){return e.ofType(B.$O).switchMap((function(){var e=[],r=t.getState();return(0,ne.Ju)(r).right.forEach((function(t){(0,W.Yq)(t)(r)&&e.push((0,z.Xg)(t,"enabled",!1))})),f().Observable.from(e)}))},Be=function(e,t){return(0,oe.U)(e,t,"featureGrid",(function(){return f().Observable.from([(0,B.YV)()])}),(function(e){return(0,$.Rd)(e)}))},ze=function(e,t){return e.ofType(x.DI).filter((function(e){return"featureGrid"===e.owner})).delay(500).switchMap((function(e){var r=t.getState(),n={featureProjection:(0,I.cZ)(),stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},o=e.features.map((function(e,t){return D()({},e,{id:(0,$._w)(r)[t].id,_new:(0,$._w)(r)[t]._new,type:"Feature"})})),a=D()({},y()(e.features),{id:(0,$.P3)(r).id,_new:(0,$.P3)(r)._new,type:"Feature"}),i="enterEditMode"===e.enableEdit?f().Observable.of((0,x.Yf)("drawOrEdit",a.geometry.type,"featureGrid",o,n)):f().Observable.empty();return f().Observable.of((0,B.Vw)(o)).concat(i)}))},We=function(e,t){return e.ofType(B.JB).switchMap((function(){var e=t.getState();return f().Observable.from([(0,B.F5)((0,$._w)(e)),(0,x.bp)()])}))},Qe=function(e,t){return e.ofType(B.Oj,B.jp,B.yi,B.aO).filter((function(){return(0,$.eK)(t.getState())===B.EH.EDIT&&(0,$.bq)(t.getState())})).switchMap((function(e){return r=t.getState(),n=e.type===B.yi,o=(0,I.cZ)(),a=(0,C.findGeometryProperty)((0,Z.Qs)(r)).localType,i={featureProjection:o,stopAfterDrawing:re.default.isSimpleGeomType(a),editEnabled:!0,drawEnabled:!1},(u=(0,$._w)(r).map((function(e){var t=D()({},e,{type:"Feature"});if(!g()(t)){var o=(0,$.ND)(r);if(o[t.id]&&(o[t.id].geometry||null===o[t.id].geometry)&&(t.geometry=o[t.id].geometry),t._new&&!t.geometry){var a=v()((0,$.kG)(r),{id:t.id});a&&a.geometry&&(t.geometry=a.geometry)}n&&(t.geometry=(0,Z.dc)(r,t.id)?(0,Z.dc)(r,t.id).geometry:null)}return t})).filter((function(e){return null!==e.geometry||"empty_row"!==e.id}))).length>0?f().Observable.from([(0,x.Yf)("drawOrEdit",a,"featureGrid",u,i)]):f().Observable.from([(0,x.Yf)("clean","","featureGrid",[],{})]);var r,n,o,a,i,u}))},$e=function(e){return e.ofType(B.IN).switchMap((function(){return f().Observable.of((0,x.bp)())}))},Xe=function(e,t){return e.ofType(B.aO).switchMap((function(e){return e.mode===B.EH.VIEW?f().Observable.of((0,x.bp)(),(0,Q.WP)("featuregrid.select")):e.mode!==B.EH.EDIT||(0,$.bq)(t.getState())?f().Observable.of((0,Q.WP)()):f().Observable.of((0,x.bp)(),(0,Q.WP)("featuregrid.select"),(0,X.Kp)({title:"featuregrid.notSupportedGeometryTitle",message:"featuregrid.notSupportedGeometry",uid:"notSupportedGeometryWarning",autoDismiss:5}))}))},Ze=function(e){return e.ofType(B.$O).switchMap((function(){return e.ofType(T.nk).take(1).switchMap((function(){return f().Observable.of((0,B.nY)(),(0,B.YV)())})).takeUntil(e.ofType(B.sF))}))},qe=function(e,t){return e.ofType(T.nk).switchMap((function(){return(0,W._d)(t.getState())?f().Observable.of((0,z.Xg)("queryPanel","enabled",!1)):f().Observable.empty()}))},Ke=function(e,t){return e.ofType(B.$O).switchMap((function(){return e.ofType(z.kM).filter((function(e){return e.control&&"drawer"===e.control&&(0,$.Rd)(t.getState())})).switchMap((function(){return f().Observable.of((0,B.YV)(),(0,B.KD)([]))})).takeUntil(e.ofType(T.nk))}))},Je=function(e,t){return e.ofType(B.bZ).switchMap((function(){var e=t.getState();return(0,$.LB)(e)||(0,$.b4)(e)?f().Observable.of((0,B.Pv)("featureCloseConfirm",!0)):f().Observable.of((0,B.YV)())}))},et=function(e){return e.ofType(B.Gk).switchMap((function(){return f().Observable.of((0,B.$E)(),(0,B.Pv)("clearConfirm",!1))}))},tt=function(e){return e.ofType(B.vO).switchMap((function(){return f().Observable.of((0,z.Xg)("drawer","enabled",!1),(0,B.Pv)("featureCloseConfirm",!1))}))},rt=function(e,t){return e.ofType(B.$O).exhaustMap((function(){return e.ofType(B.sF).delay(50).filter((function(){return(0,Z.M7)(t.getState())})).switchMap((function(){return f().Observable.of(ge(t.getState()))})).takeUntil(e.ofType(T.nk,k.xy,B.VM))}))},nt=function(e){return e.ofType(B.$O).switchMap((function(){return f().Observable.race(e.ofType(k.xy).take(1),e.ofType(B.sF).take(1)).exhaustMap((function(t){return t.type===B.sF?f().Observable.empty():e.ofType(k.F9).switchMap((function(){return f().Observable.of((0,B.t9)())}))})).takeUntil(e.ofType(T.nk,z.kM).filter((function(e){return e.type===T.nk||e.control&&"drawer"===e.control})).merge(e.ofType(B.sF).withLatestFrom(e.ofType(k.xy,k.F9).scan((function(e,t){switch(t.type){case k.xy:return!1;case k.F9:return!0;default:return!1}}),!0).startWith(!0),(function(e,t){return t})).filter((function(e){return e}))))}))},ot=function(e,t){return e.ofType(B.VM).switchMap((function(){return f().Observable.of((0,B.KD)([]),(0,N.F)(s()(t.getState(),'featuregrid.advancedFilters["'.concat((0,$.u$)(t.getState()),'"]'))),(0,B.YV)(),(0,z.Xg)("queryPanel","enabled",!0)).merge(f().Observable.race(e.ofType(N.Wm).mergeMap((function(e){return f().Observable.of((0,G.rP)(e.searchUrl,e.filterObj),(0,B.Uh)(D()({},(0,K.gC)(t.getState()),e.filterObj)),(0,z.Xg)("queryPanel","enabled",!1),(0,B.t9)())})),e.ofType(z.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).mergeMap((function(){var e="clean"!==(t.getState().draw||{}).drawStatus?[(0,x.Yf)("clean","","featureGrid",[],{})]:[];return f().Observable.from(e.concat((0,B.t9)()))}))).takeUntil(e.ofType(B.$O,T.nk)))}))},at=function(e,t){return e.ofType(B.a3).filter((function(){return!s()(t.getState(),"featuregird.virtualScroll",!1)})).switchMap((function(){return f().Observable.of((0,U.Px)(M()((0,Z.F0)(t.getState())),"EPSG:4326"))}))},it=function(e){return e.ofType(B.aO).filter((function(e){return e.mode===B.EH.EDIT})).map((function(){return(0,z.fV)(["query"])}))},ut=function(e){return e.ofType(B.$O).switchMap((function(){return f().Observable.of((0,k.Mc)())}))},ct=function(e,t){return e.ofType(G._T).filter((function(){return(0,Z.M7)(t.getState())})).mapTo((0,B.hB)())},ft=function(e,t){return e.ofType(G._T).filter((function(){return!(0,Z.M7)(t.getState())})).switchMap((function(){return f().Observable.from([ge(t.getState()),{type:B.Hg}])}))},lt=function(e,t){return e.ofType(B.sF).filter((function(){return(0,Z.M7)(t.getState())})).switchMap((function(){return f().Observable.of((0,G.XO)())}))},st=function(e,t){return e.ofType(G.Yx,G.VN).filter((function(e){var r=t.getState().featuregrid.disableQuickFilterSync;return e.type===G.Yx||!r})).switchMap((function(){var r=t.getState(),n=r.query,o=(r.featuregrid||{}).selectedLayer,a=(n||{}).filterObj;return f().Observable.merge(f().Observable.of((0,Z.M7)(t.getState())).filter((function(e){return e})),e.ofType(B.Yd)).mergeMap((function(){return f().Observable.of(function(e,t){return(0,H.He)(e,{filterObj:t})}(o,a))}))}))},pt=function(e,t){var r=t.getState;return e.ofType(B.ye).filter((function(){return!(0,Z.gy)(r())})).switchMap((function(t){var n=r(),o=t.pages,a=o.startPage,i=o.endPage,u=n.featuregrid,c=u.pages,l=u.pagination,p=s()(l,"size"),y=(0,I.gP)(a,i,c,p),d=y[1]-y[0]+1;return f().Observable.of((0,G.IO)((0,Z.Bu)(n),pe(fe({},(0,Z.X1)(n)),{startIndex:y[0]*p,maxFeatures:d*p}),(0,$.TC)(n))).filter((function(){return y.length>0})).merge(e.ofType(G.Hu).filter((function(){return y.length>0})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.result,n=void 0===t?{}:t,o=e.filterObj,u=r().featuregrid,f=u.features,l=u.maxStoredPages,y=s()(o,"pagination.startIndex"),d=(0,I.f1)(n,{endPage:i,startPage:a},{pages:c,features:f||[]},{size:p,startIndex:y,maxStoredPages:l}),g=d.pages,b=d.features;return(0,B.UB)(b,g)})).take(1).takeUntil(e.ofType(G.VT))).merge(e.ofType(G.yz).filter((function(){return y.length>0})).filter((function(e){return!e.isLoading})).withLatestFrom(e.ofType(B.ye)).map((function(e){return e[1]})).take(1).takeUntil(e.ofType(G.VT)))}))},yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(H.Zz).filter((function(e){var t=e.layer,r=void 0===t?[]:t,o=e.params,a=void 0===o?{}:o;return h()(O()(r),(0,$.u$)(n()))&&h()(Object.keys(a),"time")&&(0,$.DK)(n())})).merge(e.ofType(B.d)).filter((function(){return(0,$.Rd)(n())})).withLatestFrom(e.ofType(G.Qq),(function(e,t){return t})).switchMap((function(e){return f().Observable.of((0,G.rP)(e.searchUrl,e.filterObj))}))},dt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(z.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control;return"drawer"===t&&r().browser&&r().browser.mobile&&(0,W.BP)(r())})).switchMap((function(){return f().Observable.of((0,k.aN)(),(0,B.t9)())}))},gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(k.xy).filter((function(){return r().browser&&r().browser.mobile&&(0,W.BP)(r())})).mapTo((0,z.Xi)("drawer","enabled"))},bt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(B.$).switchMap((function(){var e,t=null===(e=(0,$.Li)(r()))||void 0===e?void 0:e.id;return f().Observable.of((0,x.k4)(t))}))},vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(B.sF).switchMap((function(){var e=[(0,x.k4)(!1)];return(0,J.jP)(r())&&e.push((0,x.oJ)()),f().Observable.from(e)}))},mt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(B.aO).filter((function(e){return"VIEW"===e.mode})).switchMap((function(){var e=[];return(0,J.jP)(r())&&e.push((0,x.oJ)()),f().Observable.from(e)}))},Ot=r(545578),wt=r.n(Ot),ht=r(701469),St=r.n(ht),Et=r(122138),Tt=r.n(Et),Ft=r(415124);function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function _t(e){return function(e){if(Array.isArray(e))return Mt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function It(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Pt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==Pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===Pt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dt={advancedFilters:{},filters:{},editingAllowedRoles:["ADMIN"],enableColumnFilters:!0,showFilteredObject:!1,timeSync:!1,showTimeSync:!1,open:!1,canEdit:!1,focusOnEdit:!1,showAgain:!1,showPopoverSync:null===(0,Ft.ac)().getItem("showPopoverSync")||"true"===(0,Ft.ac)().getItem("showPopoverSync"),mode:B.EH.VIEW,changes:[],pagination:{page:0,size:20},select:[],drawing:!1,newFeatures:[],features:[],dockSize:.35,customEditorsOptions:{rules:[]}},xt=function(e,t){return t===e||void 0!==e.id&&null!==e.id&&e.id===t.id},Rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.filter((function(t){return xt(e,t)})).length>0},Lt=function(e,t,r,n){return e.map((function(e){return Rt(e,t)?function(e,t,r){return It(It({},e),{},r?{properties:It(It({},e.properties),t),geometry:r.geometry}:{properties:It(It({},e.properties),t)})}(e,r,n):e}))};var Ct=r(218291),kt=(0,a.connect)((0,i.P1)([function(e){var t;return null==e||null===(t=e.featuregrid)||void 0===t?void 0:t.open}],(function(e){return{open:e}})))((0,Ct.Z)((function(e){return!!e.open}))((0,o.lazy)((function(){return Promise.all([r.e(72986),r.e(85294),r.e(43129),r.e(96259),r.e(69334),r.e(72555),r.e(20),r.e(53370),r.e(94192),r.e(21951),r.e(485),r.e(88300),r.e(58853)]).then(r.bind(r,75460))}))));const Gt=(0,u.rx)("FeatureEditor",{component:kt,epics:n,reducers:{featuregrid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.Xp:return D()({},e,{showPopoverSync:null===(0,Ft.ac)().getItem("showPopoverSync")||"true"===(0,Ft.ac)().getItem("showPopoverSync"),editingAllowedRoles:t.options.editingAllowedRoles||e.editingAllowedRoles||["ADMIN"],virtualScroll:!!t.options.virtualScroll,maxStoredPages:t.options.maxStoredPages||5});case B.ye:case B.gG:return D()({},e,{pagination:{page:void 0!==t.page?t.page:e.pagination.page,size:void 0!==t.size?t.size:e.pagination.size}});case B.fT:var r;return It(It({},e),{},{pagination:It(It({},null!==(r=e.pagination)&&void 0!==r?r:{}),{},{size:t.size})});case B.Oj:var n=t.features.filter((function(e){return"empty_row"!==e.id}));return e.multiselect&&t.append?D()({},e,{select:t.append?wt()([].concat(_t(e.select),_t(n)),"id"):n}):n&&e.select&&e.select[0]&&n[0]&&1===e.select.length&&xt(n[0],e.select[0])?e:D()({},e,{select:n||[]});case B.v6:var o=e.select.filter((function(e){return!Rt(e,t.features)})),a=t.features.filter((function(t){return!Rt(t,e.select)})),i=o.concat(a||[]);return D()({},e,{select:i});case B.jp:return D()({},e,{select:e.select.filter((function(e){return!Rt(e,t.features)}))});case B.DU:var u,c;return D()({},e,{multiselect:null!==(u=t.multiselect)&&void 0!==u?u:e.multiselect,showCheckbox:null!==(c=t.showCheckbox)&&void 0!==c?c:e.showCheckbox});case B.r:return D()({},e,{customEditorsOptions:t.payload});case B.gJ:return D()({},e,t.options||{});case B.CM:return D()({},e,{select:[],changes:[]});case B.iQ:return D()({},e,{features:t.features});case B.dZ:return D()({},e,{dockSize:t.dockSize});case B.$:return D()({},e,{selectedLayer:t.id});case B.qw:return D()({},e,{tools:It(It({},e.tools),{},jt({},t.tool,void 0===t.value?!(e.tools&&e.tools[t.tool]):t.value))});case B.f$:return D()({},e,{attributes:It(It({},e.attributes),{},jt({},t.name,It(It({},e.attributes&&e.attributes[t.name]||{}),{},jt({},t.key,t.value||e.attributes&&e.attributes[t.name]&&!e.attributes[t.name][t.key]))))});case B.aO:return D()({},e,{showPopoverSync:null!==(0,Ft.ac)().getItem("showPopoverSync")?"true"===(0,Ft.ac)().getItem("showPopoverSync"):t.mode!==B.EH.EDIT,tools:t.mode===B.EH.EDIT?{}:e.tools,mode:t.mode,multiselect:t.mode===B.EH.EDIT,drawing:!1});case B.K8:var f=t.features.filter((function(e){return e._new}))||[];return D()({},e,{newFeatures:f.length>0?Lt(e.newFeatures,f,t.updated,null):e.newFeatures,changes:[].concat(_t(e&&e.changes||[]),_t(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:t.updated}}))))});case B.AH:return D()({},e,{saving:!0,loading:!0});case B.AY:return D()({},e,{deleteConfirm:!1,saved:!0,saving:!1,drawing:!1,loading:!1});case B.yi:return D()({},e,{saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[]});case B.IN:var l=Tt().v1();return D()({},e,{newFeatures:t.features.map((function(e){return It(It({},e),{},{_new:!0,id:e.id?e.id:l,type:"Feature",geometry:e.geometry?e.geometry:null})})),select:t.features.map((function(e){return It(It({},e),{},{_new:!0,id:e.id?e.id:l,type:"Feature",geometry:e.geometry?e.geometry:null})}))});case B.SW:return D()({},e,{deleteConfirm:!1,saving:!1,loading:!1,drawing:!1});case B.DI:var p=t.features.filter((function(e){return e._new}))||[];return D()({},e,{newFeatures:p.length>0?Lt(e.newFeatures,p,null,{geometry:It({},y()(p).geometry)}):e.newFeatures,changes:t.features.filter((function(e){return!e._new})).map((function(e,r){return{id:e.id,updated:{geometry:t.features[r].geometry}}})),drawing:!1});case B.oh:var d=t.features.filter((function(e){return e._new}))||[];return D()({},e,{newFeatures:d.length>0?Lt(e.newFeatures,d,null,{geometry:null}):e.newFeatures,changes:[].concat(_t(e&&e.changes||[]),_t(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:{geometry:null}}}))))});case G.u7:return D()({},e,{localType:s()(t,"featureType.original.featureTypes[0].properties[1].localType")});case B._9:return D()({},e,{drawing:!e.drawing});case B.$O:return D()({},e,{open:!0});case B.sF:return D()({},e,{open:!1,pagination:{page:0,size:e.pagination.size},mode:B.EH.VIEW,tools:{},saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[]});case B.MK:return D()({},e,{disableToolbar:t.disabled});case B.ut:return D()({},e,{canEdit:t.permission.canEdit});case x.hZ:return"clean"===t.status?D()({},e,{drawing:!1}):e;case B._u:var g=t.update||{},b=g.attribute;if(b&&t.append){var v=e.filters[b].value,m=[];null!=v&&v.attribute&&(m=[v]),St()(v)&&(m=v);var O=[].concat(_t(m),[t.update.value]);return D()({},e,{filters:jt({},b,{attribute:b,enabled:!0,type:"geometry",operator:"OR",value:O})})}return b?D()({},e,{filters:It(It({},e.filters),{},jt({},b,t.update))}):e;case G.Yx:return D()({},e,{filters:{}});case G.VN:var w;return It(It({},e),{},{useLayerFilter:null!==(w=t.useLayerFilter)&&void 0!==w?w:e.useLayerFilter});case B.DA:var h=t.dockProps&&t.dockProps.maxDockSize,S=t.dockProps&&t.dockProps.minDockSize,E=h&&S&&S<=t.size&&h>=t.size&&t.size||h&&h<t.size&&h||S&&S>t.size&&S||t.size;return D()({},e,{dockSize:E});case B.Lz:return D()({},e,{advancedFilters:D()({},e.advancedFilters,jt({},e.selectedLayer,t.filterObj))});case B.Jb:return D()({},e,{features:t.features||[],pages:t.pages||[]});case B.yA:return D()({},e,{showPopoverSync:!1});case B.sK:return D()({},e,{showAgain:!e.showAgain});case B.d:return D()({},e,{timeSync:t.value});default:return e}}},containers:{TOC:{doNotHide:!0,name:"FeatureEditor"}}})},998869:(e,t,r)=>{"use strict";r.d(t,{U:()=>s});var n=r(782904),o=r(49977),a=r.n(o),i=r(607147),u=r(242780),c=r(604206),f=r(801550),l=r(433528),s=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return a().Observable.from([(0,n.Xg)(t,"enabled",null)])},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e,t){return(0,i.Yq)(t)(e)};return e.ofType(u.Np,c.hZ,f.YD,l.$O).filter((function(e){var n=e.type,o=e.status,a=e.owner,i=e.eventName,p=e.toolName,y=s(t.getState(),r);switch(n){case l.$O:return"featureGrid"!==r;case f.YD:return y&&"click"===i&&p!==r;case c.hZ:return y&&("drawOrEdit"===o||"start"===o)&&a!==r;case u.Np:default:return y&&"annotations"!==r}})).switchMap((function(e){return s(t.getState(),r)?o(t.getState(),r,e):a().Observable.empty()}))}},510284:(e,t,r)=>{"use strict";r.d(t,{sw:()=>v,oB:()=>m});var n=r(49977),o=r.n(n),a=r(227361),i=r.n(a),u=r(505055),c=r(507526);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function l(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return p(e,arguments,g(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)},s(e)}function p(e,t,r){return p=y()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&d(o,r.prototype),o},p.apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}r(324384);var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,r,n,o=(t=a,r=y(),function(){var e,n=g(t);if(r){var o=g(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return l(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=o.call(this,e)).name="OGCError",r.code=t,r}return n=a,Object.defineProperty(n,"prototype",{writable:!1}),n}(s(Error)),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tagNameProcessors:[c.stripPrefix],explicitArray:!1,mergeAttrs:!0};return o().Observable.bindNodeCallback((function(e,r){return(0,u.parseString)(e,t,r)}))(e)},m=function(e){return e.switchMap((function(e){return"string"==typeof e.data&&e.data.indexOf("ExceptionReport")>0?o().Observable.bindNodeCallback((function(e,t){return(0,u.parseString)(e,{tagNameProcessors:[c.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data).map((function(e){var t=i()(e,"ExceptionReport.Exception.ExceptionText");throw new b(t||"Undefined OGC Service Error",i()(e,"ExceptionReport.Exception.exceptionCode"))})):o().Observable.of(e)}))}},651751:(e,t,r)=>{var n=r(834387),o=n.filter,a=n.fidFilter;e.exports={fidFilter:a,filter:o}},439156:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t);if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=r(102245),c=r(984596),f=r(378889).wfsToGmlVersion,l=function(e){return'service="WFS" version="'+e+'" '+("1.0.0"===e?'outputFormat="GML2" ':"")+'xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs '+"http://schemas.opengis.net/wfs/".concat(e,"1.0.0"===e?'/WFS-basic.xsd"':'/wfs.xsd"')},s=function(e){return'service="WFS" version="'+e+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"'};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wfsVersion,r=void 0===t?"1.1.0":t,n=e.gmlVersion,o=e.filterNS,i=e.wfsNS,p=void 0===i?"wfs":i,y=n;!y&&r?y=f(r):y||(y="3.1.1");var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewParams,n=e.resultType,o=e.outputFormat,a=e.startIndex,i=e.maxFeatures,u=function(e){return 0===r.indexOf("2.")?'count="'.concat(e,'"'):'maxFeatures="'.concat(e,'"')};return(0===r.indexOf("1.")?l(r):s(r))+(n?' resultType="'.concat(n,'"'):"")+(o?' outputFormat="'.concat(o,'"'):"")+(a||0===a?' startIndex="'.concat(a,'"'):"")+(i||0===i?" ".concat(u(i)):"")+(t?' viewParams="'.concat(t,'"'):"")},g=function(e){return c(e).map((function(e){return"<".concat("2.0"===r?"fes":"ogc",":PropertyName>").concat(e,"</").concat("2.0"===r?"fes":"ogc",":PropertyName>")})).join("")};return a(a({propertyName:g},u({gmlVersion:y,wfsVersion:r,filterNS:o||"2.0"===r?"fes":"ogc"})),{},{getFeature:function(e,t){return"<".concat(p,":GetFeature ").concat(d(t),">").concat(Array.isArray(e)?e.join(""):e,"</").concat(p,":GetFeature>")},sortBy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ASC";return"<".concat(p,":SortBy><").concat(p,":SortProperty>").concat(g(e),"<").concat(p,":SortOrder>").concat(t,"</").concat(p,":SortOrder></").concat(p,":SortProperty></").concat(p,":SortBy>")},query:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.srsName,a=void 0===o?"EPSG:4326":o;return"<".concat(p,":Query ").concat("2.0"===r?"typeNames":"typeName",'="').concat(e,'" ').concat("native"!==a?'srsName="'.concat(a,'"'):"",">")+"".concat(Array.isArray(t)?t.join(""):t)+"</".concat(p,":Query>")}})}},750937:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=["wfsVersion","wfsNS"];function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t);if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=r(227361),s=r(799767),p=s.insert,y=s.feature,d=s.attribute,g=r(199381).transaction,b=r(550525),v=b.deleteFeaturesByFilter,m=b.deleteFeature,O=r(516685),w=O.update,h=O.propertyChange,S=r(378889),E=S.getPropertyDesciptor,T=S.getValue,F=S.findGeometryProperty,P=S.featureTypeSchema,_=r(439156),M=function(e,t){return t&&t.length>0?[e].concat(function(e){if(Array.isArray(e))return f(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):e;var r},A=function(e){this.version=e},I=function(e){return l(e,"featureTypes[0].typeName")},j=function(e){return e.targetPrefix?"".concat(e.targetPrefix,":").concat(I(e)):I(e)},D=function(e,t){return e.geometry_name||F(t).name},x=function(e,t){return"geometry"===e||e===D({},t)?D({},t):e};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.wfsVersion,n=void 0===r?"1.1.0":r,a=t.wfsNS,u=void 0===a?"wfs":a,f=c(t,o);if("1.1.0"!==n)throw new A(n);var l=function(t){return y(e.targetPrefix,I(e),Object.keys(t.properties||[]).filter((function(t){return E(t,e)})).map((function(r){return d(e.targetPrefix,r,T(t.properties[r],r,e))})).concat(t.geometry?d(e.targetPrefix,D(t,e),T(t.geometry,D(t,e),e)):[]))},s=function(e){return e.features?e.features.map(l):l(e)};return i(i({},_(i(i({},f),{},{wfsVersion:n,wfsNS:u}))),{},{insert:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return p(u,Array.isArray(M(e,r))?M(e,r).map(s):s(e))},getPropertyName:function(t){return x(t,e)},deleteByFilter:function(t){return v(u,t,j(e))},deleteFeature:function(t){return m(u,t,j(e))},update:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return w(u,j(e),M(t,n))},propertyChange:function(t,r){return h(u,t,T(r,t,e))},transaction:function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return g(M(t,o),P(e),n,u)}})}},550525:(e,t,r)=>{var n=r(651751).fidFilter,o=function(e,t,r){return"<".concat(e,':Delete typeName="').concat(r,'">').concat(t,"</").concat(e,":Delete>")},a=function(e,t,r){return o(e,n("ogc",t),r)};e.exports={deleteFeaturesByFilter:o,deleteById:a,deleteFeature:function(e,t,r){return a(e,t.features&&1===t.features.length?t.features[0].id:t.id,r)}}},799767:e=>{var t=function(e,t,r){return"<".concat(e?e+":"+t:t,">").concat(Array.isArray(r)?r.join(""):r,"</").concat(e?e+":"+t:t,">")},r=t,n=t;e.exports={insert:function(e,t){return"<".concat(e,":Insert>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Insert>")},feature:n,attribute:r}},199381:e=>{e.exports={transaction:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.wfsNS,o=void 0===n?"wfs":n,a=r.wfsVersion,i=void 0===a?"1.1.0":a;return"<".concat(o,":Transaction ")+'service="WFS" '+'version="'.concat(i,'" ')+"xmlns:".concat(o,'="http://www.opengis.net/wfs" ')+'xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs" '+"".concat(t,">")+"".concat(Array.isArray(e)?e.join(""):e)+"</".concat(o,":Transaction>")}}},516685:e=>{e.exports={update:function(e,t,r){return"<".concat(e,':Update typeName="').concat(t,'">').concat(Array.isArray(r)?r.join(""):r,"</wfs:Update>")},propertyChange:function(e,t,r){return"<".concat(e,":Property>")+"<".concat(e,":Name>").concat(t,"</").concat(e,":Name>")+"<".concat(e,":Value>").concat(r,"</").concat(e,":Value>")+"</".concat(e,":Property>")}}},210107:e=>{e.exports=function(e,t,r,n,o){return o(e,(function(e,o,a){r=n?(n=!1,e):t(r,e,o,a)})),r}},354061:(e,t,r)=>{var n=r(62663),o=r(989881),a=r(267206),i=r(210107),u=r(701469);e.exports=function(e,t,r){var c=u(e)?n:i,f=arguments.length<3;return c(e,a(t,4),r,f,o)}}}]);