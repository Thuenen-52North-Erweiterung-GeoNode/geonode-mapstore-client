(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[69845],{80416:(e,n,r)=>{"use strict";r.d(n,{yS:()=>t,Zz:()=>i,ms:()=>u,ih:()=>o,OX:()=>a,sb:()=>l,K$:()=>y,k7:()=>f,cX:()=>s,x9:()=>p,vs:()=>d,oE:()=>E,Po:()=>v,qv:()=>A,cI:()=>R,g6:()=>L,I4:()=>g,l$:()=>S,Xv:()=>_,k3:()=>h,CQ:()=>b,R8:()=>O,HN:()=>T,sH:()=>m,c7:()=>D,_7:()=>N,eF:()=>Y,O6:()=>I,ED:()=>P,RP:()=>k,sF:()=>V,VP:()=>G,He:()=>w,vO:()=>H,WO:()=>C,bh:()=>M,pV:()=>x,MK:()=>F,ZF:()=>U,tV:()=>X,Dv:()=>j,Yz:()=>W,kI:()=>$,XG:()=>B,A4:()=>K,Rp:()=>z,$o:()=>Q,ct:()=>Z,oh:()=>q,$h:()=>J,ud:()=>ee,Qr:()=>ne,LR:()=>re,nN:()=>te,UG:()=>ie,F5:()=>ue,c9:()=>oe,Jh:()=>ce,Xy:()=>ae});var t="CHANGE_LAYER_PROPERTIES",i="LAYERS:CHANGE_LAYER_PARAMS",u="CHANGE_GROUP_PROPERTIES",o="TOGGLE_NODE",c="CONTEXT_NODE",a="SORT_NODE",l="REMOVE_NODE",y="UPDATE_NODE",f="MOVE_NODE",s="LAYER_LOADING",p="LAYER_LOAD",d="LAYER_ERROR",E="ADD_LAYER",v="ADD_GROUP",A="REMOVE_LAYER",R="SHOW_SETTINGS",L="HIDE_SETTINGS",g="UPDATE_SETTINGS",S="REFRESH_LAYERS",_="LAYERS:UPDATE_LAYERS_DIMENSION",h="LAYERS_REFRESHED",b="LAYERS_REFRESH_ERROR",O="LAYERS:BROWSE_DATA",T="LAYERS:DOWNLOAD",m="LAYERS:CLEAR_LAYERS",D="LAYERS:SELECT_NODE",N="LAYERS:FILTER_LAYERS",Y="LAYERS:SHOW_LAYER_METADATA",I="LAYERS:HIDE_LAYER_METADATA",P="LAYERS:UPDATE_SETTINGS_PARAMS";function k(e,n,r){return{type:R,node:e,nodeType:n,options:r}}function V(){return{type:L}}function G(e){return{type:g,options:e}}function w(e,n){return{type:t,newProperties:n,layer:e}}function H(e,n){return{type:i,layer:e,params:n}}function C(e,n){return{type:u,newProperties:n,group:e}}function M(e,n,r){return{type:o,node:e,nodeType:n,status:!r}}function x(e){return{type:c,node:e}}function F(e,n){return{type:a,node:e,order:n,sortLayers:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}function U(e,n){return{type:l,node:e,nodeType:n,removeEmpty:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}function X(e,n,r){return{type:y,node:e,nodeType:n,options:r}}function j(e,n,r){return{type:f,node:e,groupId:n,index:r}}function W(e){return{type:s,layerId:e}}function $(e,n){return{type:p,layerId:e,error:n}}function B(e,n,r){return{type:d,layerId:e,tilesCount:n,tilesErrorCount:r}}function K(e){return{type:E,layer:e,foreground:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]}}function z(e,n,r){return{type:v,group:e,parent:n,options:r}}function Q(e){return{type:A,layerId:e}}function Z(e,n){return{type:t,layer:e,newProperties:{_v_:n||(new Date).getTime()}}}function q(e){return{type:h,layers:e}}function J(e,n){return{type:b,layers:e,error:n}}function ee(e,n,r,t){return{type:_,dimension:e,value:n,options:r,layers:t}}function ne(e){return{type:O,layer:e}}function re(e){return{type:T,layer:e}}function te(){return{type:m}}function ie(e,n,r){return{type:D,id:e,nodeType:n,ctrlKey:r}}function ue(e){return{type:N,text:e}}function oe(e,n){return{type:Y,metadataRecord:e,maskLoading:n}}function ce(){return{type:I}}function ae(e,n){return{type:P,newParams:e,update:n}}},79322:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>L});var t=r(24852),i=r.n(t),u=r(91175),o=r.n(u),c=r(13218),a=r.n(c),l=r(71703),y=r(22843),f=r(99914),s=r(80416);function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var d=function(e,n){return e.filter((function(e){return n===e.group}))},E=function(e){var n=0;return e.forEach((function(e){e.visibility&&n++})),n},v=function(e,n,r){for(var t=[],i=function(r){var i=n.filter((function(n){return e[r].id===n.id}))[0];i&&e[r].visibility&&!i.visibility&&t.push(e[r])},u=0;u<e.length;u++)i(u);if(1===t.length){var o=A(r,t[0]);o&&o.exclusiveLayer&&d(e,t[0].group).forEach((function(e){e.id!==t[0].id&&r.updateLayerVisibility(e.id,"layer",{visibility:!1})}))}},A=function(e,n){var r=o()(e.groups.filter((function(e){return a()(e)&&e.id===n.group})));return void 0!==r?r:o()(e.groups.filter((function(e){return a()(e)&&"Default"===e.id})))},R=(0,l.connect)((function(e){return{layers:(0,f.Bi)(e),groups:(0,f.Mm)(e)}}),{updateLayerVisibility:s.tV})((function(e){var n=e.layers,r=e.groups.filter((function(e){return"Default"!==e.id})),u=(0,t.useRef)(""),o=function(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,u,o,c=[],a=!0,l=!1;try{if(u=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;a=!1}else for(;!(a=(t=u.call(r)).done)&&(c.push(t.value),c.length!==n);a=!0);}catch(e){l=!0,i=e}finally{try{if(!a&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return c}}(e,n)||function(e,n){if(e){if("string"==typeof e)return p(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,t.useState)(!1),2),c=o[0],a=o[1];(0,t.useEffect)((function(){u.current={layers:n,groups:r}}),[c]);var l=!1;if(window.onclick=function(t){var i,o=t.target;(o.className.includes("glyphicon-record")||o.className.includes("glyphicon-unchecked")||o.className.includes("glyphicon-eye-open")||o.className.includes("glyphicon-eye-close"))&&((i=o,l=i.parentElement.attributes.class.nodeValue.includes("toc-default-group-head")?i.className.includes("glyphicon-eye-open")?{clicked:!0,open:!0}:{clicked:!0,open:!1}:{clicked:!1,open:null}).clicked&&l.open?function(e,n,r){e&&e.forEach((function(e){if(e.exclusiveLayer){var t=d(n,e.id);if(E(t)>1){t=t.reverse(),r.updateLayerVisibility(t[0].id,"layer",{visibility:!0});for(var i=1;i<t.length;i++)r.updateLayerVisibility(t[i].id,"layer",{visibility:!1})}}}))}(r,n,e):function(e,n,r){e&&n.current&&v(r,n.current.layers,e)}(e,u,n),a(!c))},u.current.groups&&r)for(var y=function(t){var i=u.current.groups.filter((function(e){return r[t].id===e.id}))[0];if(i){if(r[t].exclusiveLayer&&!i.exclusiveLayer){var o=d(n,r[t].id);E(o)>1&&o.forEach((function(n){e.updateLayerVisibility(n.id,"layer",{visibility:!1})}))}!function(e,n,r,t,i){if(e.nodes.length-n.nodes.length==1&&e.exclusiveLayer){var u=d(r,e.id),o=d(t,e.id);if(E(u)>1)for(var c=function(e){var n=o.filter((function(n){return n.id===u[e].id}))[0];if(n&&n.visibility&&i.updateLayerVisibility(u[e].id,"layer",{visibility:!1}),void 0===n){var r=u[e].visibility;i.updateLayerVisibility(u[e].id,"layer",{visibility:!r})}},a=0;a<u.length;a++)c(a)}}(r[t],i,n,u.current.layers,e)}},f=0;f<r.length;f++)y(f);return i().createElement("div",null)}));const L=(0,y.rx)("ExclusiveLayer",{component:R})},99914:(e,n,r)=>{"use strict";r.d(n,{Bi:()=>u,Mm:()=>o});var t=r(13218),i=r.n(t),u=function(e){return e.layers.flat.filter((function(e){return function(e){if("background"!=e.group)return e}(e)}))},o=function(e){return c(e.layers.groups)},c=function(e){if(Array.isArray(e)){var n=[];return function e(r){r.forEach((function(r){i()(r)&&(n.push(r),r.nodes&&e(r.nodes))}))}(e),n}return[]}}}]);