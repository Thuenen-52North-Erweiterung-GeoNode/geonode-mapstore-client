(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[50369],{691380:(e,t,r)=>{"use strict";r.d(t,{ZY:()=>u,Gv:()=>s});var n=r(124852),o=r.n(n),i=r(775382),a=r(867076),c=r(438482);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.overrideWidthProvider;return(0,a.compose)((0,a.defaultProps)({useDefaultWidthProvider:!t}),(function(e){return function(t){return o().createElement(i.Z,{handleWidth:!0},(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.width;return o().createElement(e,l({width:n},t))}))}}))},s=function(e){return(0,a.compose)((0,a.withStateHandlers)((function(){return{}}),{onResize:function(){return function(e){return{height:e.height}}}}),(0,c.Z)(e))}},975480:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(124852),o=r.n(n);const i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{display:"inline-block"}:t;return o().createElement("div",{style:r,className:"mapstore-inline-loader"})}},212610:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(124852),o=r.n(n),i=r(867076),a=r(957557),c=r.n(a),l=r(815135);const u=(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disabled,r=e.noTooltipWhenDisabled,n=void 0!==r&&r;return!(n&&t)}),l.Z,(function(e){return function(t){return o().createElement(e,c()(t,["tooltipId","tooltip","noTooltipWhenDisabled"]),t.children)}}))},617252:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(124852),o=r.n(n),i=r(867076),a=r(675263),c=r.n(a),l=r(957557),u=r.n(l),s=r(757588),p=r(950966);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function b(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===f(t)?t:String(t)}const O=(0,i.branch)((function(e){return e.popover}),(function(e){var t;return t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(f,t);var r,n,a,c,l=(a=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(a);if(c){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function f(){return d(this,f),l.apply(this,arguments)}return r=f,(n=[{key:"renderPopover",value:function(){return o().createElement(s.Popover,u()(this.props.popover,["trigger","placement","text"]),this.props.popover.text)}},{key:"renderContent",value:function(){var t=(0,i.toClass)(e);return o().createElement(t,u()(this.props,["popover"]))}},{key:"render",value:function(){var e=!0===this.props.popover.trigger?["hover","focus"]:this.props.popover.trigger;return o().createElement("span",null,o().createElement(p.Z,{trigger:e,placement:this.props.popover.placement,overlay:this.renderPopover()},this.renderContent()))}}])&&y(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),f}(o().Component),b(t,"propTypes",{popover:c().object}),b(t,"defaultProps",{popover:{trigger:!0}}),t}))},80717:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(124852),o=r.n(n),i=r(819081),a=r.n(i),c=r(757588),l=r(90085),u=["visible","Element","renderButton"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buttons,r=void 0===t?[]:t,n=e.btnGroupProps,i=void 0===n?{}:n,f=e.btnDefaultProps,d=void 0===f?{}:f,y=e.transitionProps,v=void 0===y?{transitionName:"toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300}:y,m=function(){return r.map((function(e,t){var r=e.visible,n=void 0===r||r,i=e.Element,a=e.renderButton,c=p(e,u);return n?a||i&&o().createElement(i,s({key:c.key||t},c))||o().createElement(l.Z,s({key:c.key||t},d,c)):null}))};return o().createElement(c.ButtonGroup,i,v?o().createElement(a(),v,m()):m())}},90085:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(124852),o=r.n(n),i=r(867076),a=r(805346),c=r(957557),l=r.n(c),u=r(757588),s=r(532425),p=r(212610),f=r(617252),d=r(282467),y=["glyph","loading","text","textId","glyphClassName","loaderProps","children"];function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}function m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const g=(0,i.compose)(p.Z,f.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.glyph,r=e.loading,n=e.text,i=void 0===n?"":n,c=e.textId,p=e.glyphClassName,f=void 0===p?"":p,g=e.loaderProps,b=void 0===g?{}:g,h=e.children,O=m(e,y);return o().createElement(d.Z,l()(O,["pullRight","confirmNo","confirmYes"]),t&&!r?o().createElement(u.Glyphicon,{glyph:t,className:f}):null,c?o().createElement(a.Z,{msgId:c}):i,r?o().createElement(s.Z,v({className:"ms-loader".concat(O.bsStyle&&" ms-loader-"+O.bsStyle||"").concat(O.bsSize&&" ms-loader-"+O.bsSize||"")},b)):null,h)}))},264945:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(124852),o=r.n(n),i=r(867076),a=r(313311),c=r.n(a),l=r(66604),u=r.n(l),s=r(669968),p=r(227361),f=r.n(p),d=r(91175),y=r.n(d);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===v(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){return f()(y()(e,(function(e){return e.color})),"color")};const O=(0,i.withProps)((function(e){var t=e.groups,r=e.showGroupColor,n=e.headerStyle,o=void 0===n?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:n;return{headerStyle:r&&t&&h(t)?g(g({},o),{},{borderTop:"3px solid ".concat(h(t))}):o}}));function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}r(889611);var j=["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgets","layouts","dependencies","verticalCompact","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","toggleMaximize","editWidget","onLayoutChange","language","env"];function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(this,arguments)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===w(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var T=(0,i.branch)((function(e){var t=e.useDefaultWidthProvider;return void 0===t||t}),s.WidthProvider)(s.Responsive),k=O(r(723473).Z),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return c()(e.widgets,(function(e){return e===t.id}))}))};const I=(0,i.pure)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.style,n=e.className,i=void 0===n?"":n,a=e.toolsOptions,l=void 0===a?{}:a,s=e.rowHeight,p=void 0===s?208:s,f=e.breakpoints,d=void 0===f?{lg:1200,md:996,sm:768,xs:480,xxs:0}:f,y=e.cols,v=void 0===y?{lg:6,md:6,sm:4,xs:2,xxs:1}:y,m=e.widgets,g=void 0===m?[]:m,b=e.layouts,h=e.dependencies,O=e.verticalCompact,w=void 0!==O&&O,P=e.compactMode,D=e.useDefaultWidthProvider,I=void 0===D||D,Z=e.measureBeforeMount,F=e.width,R=e.showGroupColor,M=e.groups,A=void 0===M?[]:M,L=e.canEdit,G=void 0===L||L,N=e.getWidgetClass,z=void 0===N?function(){}:N,W=e.onWidgetClick,V=void 0===W?function(){}:W,q=e.updateWidgetProperty,_=void 0===q?function(){}:q,H=e.deleteWidget,U=void 0===H?function(){}:H,B=e.toggleCollapse,$=void 0===B?function(){}:B,K=e.toggleMaximize,Q=void 0===K?function(){}:K,J=e.editWidget,Y=void 0===J?function(){}:J,X=e.onLayoutChange,ee=void 0===X?function(){}:X,te=e.language,re=e.env,ne=C(e,j),oe=g.filter((function(e){var t=e.mapSync,r=e.dependenciesMap;return t&&r})).map((function(e){return e.dependenciesMap})),ie=function(e){return"table"===e.widgetType&&oe.filter((function(t){return Object.keys(t).filter((function(r){return t[r]&&-1!==t[r].indexOf(e.id)})).length>0})).length>0};return o().createElement(T,{key:t||"widgets-view",useDefaultWidthProvider:I,measureBeforeMount:Z,width:I?void 0:F,isResizable:G,isDraggable:G,draggableHandle:".draggableHandle",onLayoutChange:ee,preventCollision:!0,style:r,className:"widget-container ".concat(i," ").concat(G?"":"no-drag"),rowHeight:p,autoSize:!0,verticalCompact:w,compactMode:P,breakpoints:d,cols:v,layouts:b?JSON.parse(JSON.stringify(u()(b,(function(e){return e.map((function(e){var t=c()(g,{id:e.i});return t?E(E({},e),{},{isResizable:t.dataGrid&&t.dataGrid.isResizable,isDraggable:t.dataGrid&&t.dataGrid.isDraggable,static:t.dataGrid&&t.dataGrid.static}):e}))})))):void 0},g.map((function(e){return o().createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return V(e)},className:z(e)},o().createElement(k,S({"data-grid":e.dataGrid},ne,e,{quickFilters:ie(e)?e.quickFilters:void 0,toolsOptions:l,groups:x(A,e),showGroupColor:R,dependencies:h,enableColumnFilters:ie(e),canEdit:G,updateProperty:function(){return _.apply(void 0,arguments)},toggleCollapse:function(){return $(e)},toggleMaximize:function(){return Q(e)},onDelete:function(){return U(e)},onEdit:function(){return Y(e)},language:te,env:re})))})))}))},723473:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_t});var n=r(124852),o=r.n(n),i=r(867076),a=r(12425),c=r(839860);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const u=(0,i.compose)(a.Z,(0,i.compose)((0,i.withState)("showTable","setShowTable",!1),(0,i.withHandlers)({toggleTableView:function(e){var t=e.setShowTable,r=e.showTable;return function(){return t(!r)}}}),(0,i.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.toggleTableView,i=void 0===o?function(){}:o;return{widgetTools:[].concat((t=n,function(e){if(Array.isArray(e))return l(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return i()}}])}}))),(0,c.tR)(),(0,c.AV)(),(0,c.E6)(),(0,i.branch)((function(e){return!e.showTable}),(0,c.um)())),s=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)());var p=r(227361),f=r.n(p),d=r(23279),y=r.n(d);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===v(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h=(0,i.compose)((0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n,i=e.id,a=y()((function(){return o.apply(void 0,arguments)}),500);return{gridEvents:g(g({},r),{},{onAddFilter:function(e){return a(i,"quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,r,n,a,c){return o(i,'options.columnSettings["'.concat(f()(c.filter((function(e){return!e.hide}))[e],"name"),'"].width'),t)}})}})),a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)(),(0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n,i=e.id;return{gridEvents:g(g({},r),{},{onGridSort:function(e,t){return o(i,"sortOptions",{sortBy:e,sortOrder:t})}})}})));var O=r(213314);const w=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.G5)(),(0,c.E6)(),(0,c.um)()),j=(0,i.compose)(a.Z,(0,c.tR)(),(0,c.E6)(),(0,c.um)());var S=r(387017),P=r(39589),E=r(264721),D=r.n(E),C=r(682492),T=r.n(C),k=r(378889),x=r(273849),I=r(49977),Z=r.n(I),F=r(886850),R=r(624262);const M=function(e){return e.switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=void 0===n?{}:n,i=e.filter,a=e.onLoad,c=void 0===a?function(){}:a,l=e.onLoadError,u=void 0===l?function(){}:l;return(0,F.Mc)(r,i,{timeout:15e3,params:{propertyName:o.propertyName,viewParams:o.viewParams}}).map((function(){return{loading:!1,error:void 0}})).do((function(e){return c({features:e.features,pagination:{totalFeatures:e.totalFeatures}})})).catch((function(e){return Z().Observable.of({loading:!1,error:e,data:[]}).do(u)}))}))};function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===A(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(49977);const z=function(e){return e.filter((function(e){var t=e.layer;return(void 0===t?{}:t).name})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter,c=e.sortOptions;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(c,t.sortOptions)})).map((function(e){return G(G({},e),{},{features:[],pages:[],pagination:{}})}))};var W=r(196958);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){H(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==V(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===V(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const U=function(e){return function(t){return t.switchMap((function(t){var r=t.layer,n=void 0===r?{}:r,o=t.size,i=void 0===o?20:o,a=t.maxStoredPages,c=void 0===a?5:a,l=t.filter,u=t.options,s=void 0===u?{}:u,p=t.sortOptions,f=t.pages,d=t.features,y=void 0===d?[]:d,v=t.onLoad,m=void 0===v?function(){}:v,g=t.onLoadError,b=void 0===g?function(){}:g;return e.switchMap((function(e,t){var r=e.pagesRange,o=e.pagination,a=void 0===o?{}:o;return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),(0,F.Mc)(n,l,_(_({},(0,W.S9)(r,f,i)),{},{sortOptions:p,timeout:15e3,totalFeatures:a.totalFeatures,propertyName:s.propertyName,viewParams:s.viewParams})).do((function(e){return m(_(_({},(0,W.f1)(e,r,{pages:f,features:y},_(_({},(0,W.S9)(r,f,i)),{},{size:i,maxStoredPages:c}))),{},{pagination:{totalFeatures:e.totalFeatures}}))})).map((function(){return{loading:!1}})).catch((function(e){return Z().Observable.of({loading:!1,error:e}).do(b)})).startWith({loading:!0})}))}))}};function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==B(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===B(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J=function(e){var t,r=(0,i.createEventHandler)(),n=r.handler,o=r.stream;return(t=e,t.distinctUntilChanged((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).layer;return(0,R.Tt)(e)===(0,R.Tt)(t)&&e.loadingError===t.loadingError})).switchMap((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).layer;return(0,F.v$)({layer:e}).map((function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}})).catch((function(e){return Z().Observable.of({loading:!1,error:e})}))}))).combineLatest(function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return z(e).let(r?U(t.withLatestFrom(e.map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination;return{pagination:void 0===e?{}:e}})),(function(e,t){return K({pagesRange:e},t)}))):M).startWith({})}(e,o.startWith({startPage:0,endPage:1})),(function(e,t){return K(K(K({},e),t),{},{pageEvents:{moreFeatures:n,onPageChange:function(){}}})})).startWith({loading:!0})};const Y=(0,i.compose)((0,i.defaultProps)({virtualScroll:!0,size:20,maxStoredPages:5}),(0,i.withStateHandlers)({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pages,r=e.features,n=e.pagination;return{pages:t,features:r,pagination:n,error:void 0}}}}),(0,i.withHandlers)({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,r=void 0===t?function(){}:t,n=e.onLoad,o=void 0===n?function(){}:n;return function(){r.apply(void 0,arguments),o.apply(void 0,arguments)}}}),(0,i.withProps)((function(){return{dataStreamFactory:J}})),x.Z,(0,i.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=void 0===t?{}:t,n=e.describeFeatureType,o=e.columnSettings,i=void 0===o?{}:o;return{columnSettings:T()(n?(0,k.getFeatureTypeProperties)(n).filter((function(e){return!D()(r.propertyName||[],e.name)})).reduce((function(e,t){return K(K({},e),{},Q({},t.name,{hide:!0}))}),{}):{},r.columnSettings||{},i)}})));var X=r(630881),ee=r(908488),te=r(873339),re=r(505055),ne=r.n(re),oe=r(441609),ie=r.n(oe),ae=r(618446),ce=r.n(ae),le=r(670956),ue=r(199767),se=r(27835),pe=function(e){var t=e.wfsGetFeature;return(0,se.Uh)("gs:Bounds",[(0,ue.qP)("features",(0,ue.fA)("text/xml","http://geoserver/wfs","POST",t))],(0,ue.DK)((0,ue.En)("bounds","application/json")))};var fe=r(47805),de=r(761868),ye=r(552259);function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){be(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function be(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ve(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===ve(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const he=(0,i.compose)((0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies;return t&&(!ie()(r.quickFilters)||!ie()(r.filter))}),(0,i.compose)((0,i.withPropsOnChange)(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||(0,ye.createRegisterHooks)()}})),(0,i.mapPropsStream)((function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ce()(e.dependencies.quickFilters,t.dependencies.quickFilters)&&ce()(e.dependencies.filter,t.dependencies.filter)&&ce()(e.dependencies.layer,t.dependencies.layer)})).debounceTime(500).switchMap((function(e){var t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=e.hookRegister;if(!t||ie()(n.layer))return I.Observable.of({loading:!1});var a={};n.quickFilters&&(a=ge(ge({},a),(0,le.r$)(o,n.quickFilters,n.options))),n.filter&&(a=ge(ge({},a),(0,fe.composeAttributeFilters)([a,n.filter])));var c=n&&n.layer&&n.layer.name;if(!ie()(a)){a=ge(ge({},a),{},{options:ge(ge({},a.options||{}),{},{noSchemaLocation:!0})});var l=(0,fe.toOGCFilter)(c,a,"1.1.0");return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,se.mG)(e,pe(t),{},r)}((0,R.ZA)(n.layer),{wfsGetFeature:l}).switchMap((function(e){var t,r,n;if(ne().parseString(e,{explicitArray:!1},(function(e,o){t=o["ows:BoundingBox"],r=t["ows:LowerCorner"].split(" "),n=t["ows:UpperCorner"].split(" ")})),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return I.Observable.of({loading:!1});var o={minx:parseFloat(r[0]),miny:parseFloat(r[1]),maxx:parseFloat(n[0]),maxy:parseFloat(n[1])},a=i.getHook(ye.ZOOM_TO_EXTENT_HOOK);return a&&a(o,{crs:"EPSG:4326",maxZoom:21}),I.Observable.of({loading:!1})})).startWith({loading:!0}).catch((function(e){return I.Observable.of({error:"error getting bounds from filter",details:e})}))}return I.Observable.of({loading:!1})})).combineLatest(e,(function(e){var t=e.loading,r=void 0!==t&&t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,de.t8)("loading",r,n)}))})))));var Oe=r(313311),we=r.n(Oe),je=r(143378);function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function De(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===Se(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ce=(0,i.compose)((0,i.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.maps,i=void 0===o?[]:o,a=e.selectedMapId,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;return t!==c.mapSync||!ce()(n,c.dependencies)||!ce()(i,c.maps)||l!==c.filter||a!==c.selectedMapId}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=void 0===o?{}:o,a=e.maps,c=void 0===a?[]:a,l=e.selectedMapId,u=n&&n.layer&&n.layer.name,s=we()(c,(function(e){return e.mapId===l}));if(s){var p=we()(null==s?void 0:s.layers,{name:u})||{},f={},d={},y=void 0;return t&&!ie()(p)&&(n.quickFilters&&(f=Ee(Ee({},f),(0,le.r$)(i,n.quickFilters,n.options))),n.filter&&(f=Ee(Ee({},f),(0,fe.composeAttributeFilters)([f,n.filter]))),!ie()(f)&&(0,fe.toCQLFilter)(f))?(y=(0,fe.toCQLFilter)(f),d=(0,de.cc)(!1,Ee(Ee({},p),{},{params:(0,je.v)({params:{CQL_FILTER:y}},p&&p.params&&p.params.CQL_FILTER)}),{name:u},s.layers),{maps:(0,de.cc)(!1,Ee(Ee({},s),{},{layers:d}),{mapId:l},c)}):(d=s.layers.map((function(e){return Ee(Ee({},e),{},{params:Ee(Ee({},e.params),{},{CQL_FILTER:void 0})})})),{maps:(0,de.cc)(!1,Ee(Ee({},s),{},{layers:d}),{mapId:l},c)})}return{maps:c}}))),Te=function(e){return(0,i.withPropsOnChange)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.mapSync,n=t.dependencies,o=void 0===n?{}:n,a=t.selectedMapId,c=arguments.length>1?arguments[1]:void 0,l=c.mapSync,u=c.dependencies,s=c.selectedMapId;return u&&(0,i.shallowEqual)(o[e],u[e])||r===l||a===s}),(function(t){var r=t.maps,n=void 0===r?[]:r,o=t.mapSync,i=t.dependencies,a=void 0===i?{}:i,c=t.selectedMapId,l=we()(n,{mapId:c})||{},u=a[e]&&o?(0,de.t8)(e,a[e],l):l;return{mapStateSource:"__dependency_system__",maps:n.map((function(e){return e.mapId===u.mapId?u:e})),map:u}}))};var ke=r(757588);function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}var Ie=["data"];function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){Re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Re(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==xe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===xe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?[]:t,n=Me(e,Ie),i=Object.keys(r.reduce((function(e,t){return Fe(Fe({},e),t)}),{}));return o().createElement("div",{className:"mapstore-widget-table"},o().createElement(ke.Table,{striped:!0},o().createElement("thead",null,o().createElement("tr",null,i.map((function(e,t){return o().createElement("th",null,t+1===i.length&&n.yAxisLabel?n.yAxisLabel:t>0?"".concat(e):e)})))),o().createElement("tbody",null,r.map((function(e){return o().createElement("tr",null,i.map((function(t){return o().createElement("td",null,e[t])})))})))))};var Le=r(496259),Ge=r(173014),Ne=r(342415),ze=r(639837),We=r(351990),Ve=(0,Ge.Z)()((0,Ne.Z)((0,ze.Z)(We.Z)));const qe=function(e){return o().createElement("div",{className:"mapstore-widget-chart"},o().createElement(Le.Z,null,o().createElement(Ve,e)))};var _e=r(805346),He=r(965539),Ue=r(572688);const Be=function(e){var t=e.id,r=e.title,n=e.confirmDelete,i=void 0!==n&&n,a=e.className,c=e.isDraggable,l=void 0===c||c,u=e.toggleDeleteConfirm,s=void 0===u?function(){}:u,p=e.onDelete,f=void 0===p?function(){}:p,d=e.icons,y=e.topLeftItems,v=e.topRightItems,m=e.headerStyle,g=void 0===m?{}:m,b=e.children;return o().createElement("div",{className:"mapstore-widget-card",id:t},o().createElement(He.Z,{className:a,header:o().createElement("div",{style:g,className:"mapstore-widget-info ".concat(l?"draggableHandle":"")},o().createElement("div",{className:"mapstore-widget-header"},o().createElement("span",{className:"widget-icons"},d),y,o().createElement("span",{className:"widget-title"},r),o().createElement("span",{className:"mapstore-widget-options"},v)))},b),i?o().createElement(Ue.Z,{confirmText:o().createElement(_e.Z,{msgId:"widgets.widget.menu.delete"}),titleText:o().createElement(_e.Z,{msgId:"widgets.widget.menu.delete"}),body:o().createElement(_e.Z,{msgId:"widgets.widget.menu.confirmDelete"}),show:i,onClose:function(){return s(!1)},onConfirm:function(){return f(t)}}):null)};var $e=["id","title","description","headerStyle","data","series","loading","icons","showTable","topRightItems","confirmDelete","dataGrid","onDelete","toggleTableView","toggleDeleteConfirm"];function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ke.apply(this,arguments)}var Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(ke.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null};var Je=r(982030),Ye=r(599707),Xe=(0,Je.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return!t}),(function(){return{glyph:"sheet",messageId:"widgets.errors.notext"}}),Ye.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return o().createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:t}})})),et=r(957557),tt=r.n(et),rt=r(975480),nt=r(892936),ot=r(193190);function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}var at=["layers"];function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach((function(t){ut(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ut(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==it(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===it(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function st(e){return function(e){if(Array.isArray(e))return pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ft=(0,i.withHandlers)({onMapViewChanges:function(e){var t=e.updateProperty,r=void 0===t?function(){}:t,n=e.id;return function(e){e.layers;var t=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,at);return r(n,"maps",t,"merge")}}})(nt.Z),dt=r(118027);function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==yt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===yt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bt=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap((function(e){return e})).startWith(void 0),(function(e,t){var r=t&&e.options&&we()(e.options.propertyName,(function(t){return t===e.attributeName}))&&t[e.attributeName]||{},n=r&&(r.rawValue||r.value);return mt(mt({},e),{},{value:n})}))}))),ht=function(e){var t=e.options,r=e.localType,n=e.attributeName,o=e.quickFilterStream$;return(0,i.compose)((0,i.withProps)({quickFilterStream$:o,attributeName:n,options:t}),bt)((0,dt.Q)(r,{name:n}))},Ot=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.map((function(t){return mt(mt({},t),{},{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})}))}))),wt=(0,i.compose)(Ot,(0,i.withPropsOnChange)(["describeFeatureType","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeFeatureType,r=e.options,n=e.quickFilterStream$;return t?{filterRenderers:(0,W.Lo)(t).reduce((function(e,t){var o=t.localType,i=t.name,a=ht({options:r,localType:o,attributeName:i,quickFilterStream$:n});return mt(mt({},e),{},gt({},i,a))}),{})}:{}}))),jt=r(830029),St=(0,r(218291).Z)()((0,n.lazy)((function(){return Promise.all([r.e(53370),r.e(94192),r.e(21951),r.e(88300),r.e(47310)]).then(r.bind(r,588300))}))),Pt=(0,Ne.Z)((0,Ge.Z)((function(e){return!e.describeFeatureType}))(St));const Et=wt((function(e){var t=e.id,r=e.title,n=e.loading,i=e.confirmDelete,a=void 0!==i&&i,c=e.enableColumnFilters,l=void 0!==c&&c,u=e.headerStyle,s=e.icons,p=e.topRightItems,f=e.toggleDeleteConfirm,d=void 0===f?function(){}:f,y=e.onDelete,v=void 0===y?function(){}:y,m=e.gridEvents,g=void 0===m?function(){}:m,b=e.pageEvents,h=void 0===b?{moreFeatures:function(){}}:b,O=e.describeFeatureType,w=e.filterRenderers,j=e.columnSettings,S=e.features,P=e.size,E=e.pages,D=e.error,C=e.pagination,T=void 0===C?{}:C,k=e.dataGrid,x=void 0===k?{}:k,I=e.virtualScroll,Z=void 0===I||I;return o().createElement(Be,{id:"widget-chart-".concat(t),title:r,headerStyle:u,icons:s,isDraggable:x.isDraggable,confirmDelete:a,onDelete:v,toggleDeleteConfirm:d,topRightItems:p},o().createElement(He.Z,{footer:T.totalFeatures?o().createElement("div",{style:{height:"30px",overflow:"hidden"}},n?o().createElement("span",{style:{float:"right"}},o().createElement(rt.Z,null)):null,void 0===D&&o().createElement("span",{style:{float:"left",margin:"5px"}},o().createElement(_e.Z,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:T.totalFeatures}}))):null},o().createElement(Pt,{emptyRowsView:function(){return o().createElement(jt.Z,{loading:n},o().createElement(Ye.Z,{messageId:"featuregrid.noFeaturesAvailable",glyph:"features-grid"}))},gridEvents:g,sortable:!0,defaultSize:!1,columnSettings:j,pageEvents:h,virtualScroll:Z,enableColumnFilters:l,filterRenderers:w,features:S,pages:E,error:D,size:P,rowKey:"id",describeFeatureType:O,pagination:T})))}));var Dt=r(980844),Ct=["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","dataGrid","toggleTableView","toggleDeleteConfirm","onDelete"];function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tt.apply(this,arguments)}var kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(ke.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null},xt=r(946173),It=r(70919),Zt=["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","dataGrid","onDelete"];function Ft(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Rt=(0,xt.Z)()(It.Z),Mt=(0,i.compose)(te.Z,X.Z,ee.Z,S.Z,u)((function(e){var t=e.id,r=e.title,n=e.description,i=e.headerStyle,a=e.data,c=void 0===a?[]:a,l=e.series,u=void 0===l?[]:l,s=e.loading,p=e.icons,f=e.showTable,d=e.topRightItems,y=e.confirmDelete,v=void 0!==y&&y,m=e.dataGrid,g=void 0===m?{}:m,b=e.onDelete,h=void 0===b?function(){}:b,O=e.toggleTableView,w=void 0===O?function(){}:O,j=e.toggleDeleteConfirm,S=void 0===j?function(){}:j,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,$e);return o().createElement(Be,{id:"widget-chart-".concat(t),headerStyle:i,isDraggable:g.isDraggable,title:r,icons:p,topLeftItems:Qe({loading:s,title:r,description:n,showTable:f,toggleTableView:w}),confirmDelete:v,onDelete:h,toggleDeleteConfirm:S,topRightItems:d},f?o().createElement(Ae,Ke({data:c},P)):o().createElement(qe,Ke({id:t,isAnimationActive:!s,loading:s,data:c,series:u,iconFit:!0},P)))})),At=(0,i.compose)(w)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.icons,i=e.topLeftItems,a=e.id,c=e.title,l=e.text,u=e.headerStyle,s=e.topRightItems,p=e.dataGrid,f=void 0===p?{}:p,d=e.confirmDelete,y=void 0!==d&&d,v=e.onDelete,m=void 0===v?function(){}:v;return o().createElement(Be,{id:"widget-text-".concat(a),title:c,confirmDelete:y,onDelete:m,toggleDeleteConfirm:r,headerStyle:u,isDraggable:f.isDraggable,icons:n,topLeftItems:i,topRightItems:s},o().createElement(Xe,{text:l}))})),Lt=(0,i.compose)(te.Z,Ce,Te("center"),Te("zoom"),he,j)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateProperty,r=void 0===t?function(){}:t,n=e.toggleDeleteConfirm,i=void 0===n?function(){}:n,a=e.id,c=e.title,l=e.map,u=void 0===l?{}:l,s=e.maps,p=void 0===s?[]:s,f=e.selectedMapId,d=e.icons,y=e.hookRegister,v=e.mapStateSource,m=e.topRightItems,g=e.confirmDelete,b=void 0!==g&&g,h=e.loading,O=void 0!==h&&h,w=e.dataGrid,j=void 0===w?{}:w,S=e.onDelete,P=void 0===S?function(){}:S,E=e.headerStyle,D=e.env,C=e.selectionActive,T=u.size,k=(T=void 0===T?{}:T).height,x=T.width,I=u.mapInfoControl,Z=k>400&&x>400&&I;return o().createElement(Be,{id:"widget-text-".concat(a),title:c,confirmDelete:b,onDelete:P,toggleDeleteConfirm:i,headerStyle:E,icons:d,topRightItems:[o().createElement(ot.Z,{className:"map-switcher",maps:p,onChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(void 0,[a].concat(t))},value:f,disabled:C})].concat(st(m)),isDraggable:j.isDraggable},o().createElement(He.Z,{footer:o().createElement("div",{style:{height:"30px",overflow:"hidden"}},O?o().createElement("span",{style:{float:"right"}},o().createElement(rt.Z,null)):null)},o().createElement(ft,{tools:Z?["popup"]:[],updateProperty:r,id:a,map:lt({},tt()(u,"mapStateSource")),mapStateSource:v,hookRegister:y,layers:u&&u.layers,options:{style:{margin:10,height:"calc(100% - 20px)"}},env:D})))})),Gt=(0,i.compose)(te.Z,ee.Z,X.Z,Y,h)(Et),Nt=(0,i.compose)(te.Z,X.Z,ee.Z,P.Z,s)((function(e){var t=e.id,r=e.title,n=e.description,i=e.data,a=void 0===i?[]:i,c=e.series,l=void 0===c?[]:c,u=e.loading,s=e.showTable,p=e.confirmDelete,f=void 0!==p&&p,d=e.headerStyle,y=e.icons,v=e.topRightItems,m=e.dataGrid,g=void 0===m?{}:m,b=e.toggleTableView,h=void 0===b?function(){}:b,O=e.toggleDeleteConfirm,w=void 0===O?function(){}:O,j=e.onDelete,S=void 0===j?function(){}:j,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ct);return o().createElement(Be,{className:"counter-widget",id:"widget-chart-".concat(t),title:r,isDraggable:g.isDraggable,icons:y,topLeftItems:kt({loading:u,title:r,description:n,showTable:s,toggleTableView:h}),confirmDelete:f,onDelete:S,toggleDeleteConfirm:w,headerStyle:d,topRightItems:v},o().createElement(Dt.Z,Tt({id:t,isAnimationActive:!u,loading:u,data:a,series:l,iconFit:!0},P)))})),zt=(0,i.compose)(te.Z,O.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.id,i=e.title,a=e.icons,c=e.headerStyle,l=e.confirmDelete,u=void 0!==l&&l,s=e.topRightItems,p=e.dataGrid,f=void 0===p?{}:p,d=e.onDelete,y=void 0===d?function(){}:d,v=Ft(e,Zt);return o().createElement(Be,{id:"widget-text-".concat(n),title:i,confirmDelete:u,onDelete:y,toggleDeleteConfirm:r,headerStyle:c,icons:a,topRightItems:s,isDraggable:f.isDraggable},o().createElement(Rt,v))})),Wt=["dependencies","toggleCollapse","exportCSV","exportImage","onDelete","onEdit"];function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vt.apply(this,arguments)}function qt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const _t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=e.toggleCollapse,n=void 0===r?function(){}:r,i=e.exportCSV,a=void 0===i?function(){}:i,c=e.exportImage,l=void 0===c?function(){}:c,u=e.onDelete,s=void 0===u?function(){}:u,p=e.onEdit,f=void 0===p?function(){}:p,d=qt(e,Wt);return"text"===d.widgetType?o().createElement(At,Vt({},d,{toggleCollapse:n,onDelete:s,onEdit:f})):"table"===d.widgetType?o().createElement(Gt,Vt({},d,{toggleCollapse:n,exportCSV:a,dependencies:t,onDelete:s,onEdit:f})):"counter"===d.widgetType?o().createElement(Nt,Vt({},d,{toggleCollapse:n,dependencies:t,onDelete:s,onEdit:f})):"map"===d.widgetType?o().createElement(Lt,Vt({},d,{toggleCollapse:n,dependencies:t,onDelete:s,onEdit:f})):"legend"===d.widgetType?o().createElement(zt,Vt({},d,{toggleCollapse:n,dependencies:t,onDelete:s,onEdit:f})):o().createElement(Mt,Vt({},d,{toggleCollapse:n,exportCSV:a,dependencies:t,exportImage:l,onDelete:s,onEdit:f}))}},688395:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>W});var n=r(49977),o=r.n(n),i=r(666654),a=r.n(i),c=r(218721),l=r.n(c),u=r(227361),s=r.n(u),p=r(264721),f=r.n(p),d=r(618446),y=r.n(d),v=r(957557),m=r.n(v),g=r(114176),b=r.n(g),h=r(557579),O=r(881808),w=r(401757),j=r(580416),S=r(675110),P=r(324684),E=r(769293),D=r(555927),C=r(275982),T=r(178598),k=r(989077),x=r(884164),I=r.n(x),Z=r(286159);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function R(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==F(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===F(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(e){return e.ofType(E.WC,E.a3,E.W5).startWith({type:O.ok}).switchMap((function(t){return t.type===E.WC?o().Observable.never():e})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return t===C.nk}))},z=function(e,t,r,n){return o().Observable.of((0,h.Rz)("mapSync",e),(0,h.Rz)("dependenciesMap",function(e,t,r){var n,o=r.dependenciesMap,i=r.mappings,c=["layer","filter","quickFilters","options"],l=["layers","viewport","zoom","center"],u=(h.oU.exec(t)||[])[1],s=b()(o,(function(e){return-1===e.indexOf(u)})),p=Object.keys(i).filter((function(e){return void 0!==i[e]})).reduce((function(e,r){return!a()(t,"map")&&f()(c,r)?L(L({},e),{},G({},r,"".concat(t,".").concat(i[r]))):a()(t,"map")?f()(l,r)?L(L({},e),{},G({},r,"map"===t?i[r]:"".concat(t.replace(/.map$/,""),".").concat(i[r]))):L(L({},e),{},G({},r,"".concat(t.replace(/.map$/,""),".").concat(i[r]))):e}),{}),d=t.split(".maps")[0];return e?L(L(L({},s),p),{},(G(n={},"dependenciesMap","".concat(d,".dependenciesMap")),G(n,"mapSync","".concat(d,".mapSync")),n)):m()(s,[Object.keys(i)])}(e,t,r)))};const W={exportWidgetData:function(e){return e.ofType(h.Km).do((function(e){var t=e.data,r=void 0===t?[]:t,n=e.title,o=void 0===n?"data":n;return I().json2csv(r,(function(e,t){return e?null:(0,T.saveAs)(new Blob([t],{type:"text/csv"}),o+".csv")}))})).filter((function(){return!1}))},alignDependenciesToWidgets:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(O.ok,D.E9,h.Jm).map((function(){return(0,w.jx)(n())})).pluck("availableDependencies").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return y()(R(e),R(t))})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,h._k)(e.reduce((function(e,t){var r,n,o=t.split(".maps")[0],i=t.replace(/.map$/,"");return a()(t,"map")?L(L({},e),{},(G(r={},"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),G(r,"".concat(o,".mapSync"),"".concat(o,".mapSync")),G(r,"map"===t?"viewport":"".concat(i,".viewport"),"".concat(i,".bbox")),G(r,"map"===t?"center":"".concat(i,".center"),"".concat(i,".center")),G(r,"map"===t?"zoom":"".concat(i,".zoom"),"".concat(i,".zoom")),G(r,"map"===t?"layers":"".concat(i,".layers"),"map"===t?"layers.flat":"".concat(i,".layers")),r)):L(L({},e),{},(G(n={},"".concat(t,".filter"),"".concat(t,".filter")),G(n,"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),G(n,"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),G(n,"".concat(o,".mapSync"),"".concat(o,".mapSync")),G(n,"".concat(t,".layer"),"".concat(t,".layer")),G(n,"".concat(t,".options"),"".concat(t,".options")),n))}),{}))}))},toggleWidgetConnectFlow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(h.LH).switchMap((function(t){var r=t.active,i=t.availableDependencies,a=void 0===i?[]:i,c=t.options;return r&&a.length>0?1===a.length?z(r,a[0],c):o().Observable.of((0,h.kr)(r,{availableDependencies:a})).merge(e.ofType(h.V5).filter((function(){return(0,w.xI)(n())})).switchMap((function(e){var t=e.widget,i=s()((0,w.r0)(n()),"availableDependencies").filter((function(e){return(h.oU.exec(e)||[])[1]===t.id}));return"map"===t.widgetType&&(i=i.filter((function(e){return(h.jB.exec(e)||[])[2]===t.selectedMapId}))),z(r,i[0],c,t.dependeciesMap).concat(o().Observable.of((0,h.kr)(!1,{})))})).takeUntil(e.ofType(C.nk).merge(e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.key;return t===h.Cz&&r===h.jv}))))):z(r,a[0],c)}))},clearWidgetsOnLocationChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(O.ok).switchMap((function(){var t=(0,P.F)(n()).split("/"),r=t[t.length-1];return e.let(N).filter((function(){var e=(0,P.F)(n()).split("/");return e[e.length-1]!==r})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload,r=void 0===t?{}:t;return r&&r.location&&r.location.pathname?o().Observable.of((0,h.K4)()):o().Observable.empty()}))}))},exportWidgetImage:function(e){return e.ofType(h.pV).do((function(e){var t,n,o=e.widgetDivId,i=e.title,a=void 0===i?"data":i,c=document.createElement("canvas"),l=document.querySelector("#".concat(o," .recharts-wrapper svg")),u=l.outerHTML?l.outerHTML:(t=l,(n=document.createElement("div")).appendChild(t.cloneNode(!0)),n.innerHTML);Promise.all([r.e(49190),r.e(59425)]).then(r.t.bind(r,459425,23)).then((function(e){(0,e.default)(c,u,{renderCallback:function(){var e=c.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,c.width,c.height),(0,k.RP)(c.toDataURL("image/jpeg",1),"".concat(a,".jpg"),"image/jpeg")}})}))})).filter((function(){return!1}))},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(j.yS).switchMap((function(e){var r,n=e.layer,i=e.newProperties,a=t.getState(),c=(0,S.CA)(a,n);return(r=o().Observable).of.apply(r,R(l()(i,"layerFilter")&&c?[(0,h.Ko)(c)]:[]))}))},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(j.x9,j.vs).groupBy((function(e){return e.layerId})).map((function(e){return e.switchMap((function(e){var r,n=e.layerId,i=t.getState(),a=(0,S.CA)(i,n);return(r=o().Observable).of.apply(r,R(a&&a.previousLoadingError!==a.loadingError?[(0,h.Ko)(a)]:[]))}))})).mergeAll()},updateDependenciesMapOnMapSwitch:function(e,t){return e.ofType(h.$A).filter((function(e){var t=e.key;return f()(["maps","selectedMapId"],t)})).switchMap((function(e){var r=e.id,n=e.value,i=o().Observable.empty(),a="string"==typeof n?n:null==n?void 0:n.mapId;if(a){var c=(0,w.zm)(t.getState()),l=(0,Z.IO)(c,r,a);y()(c,l)||(i=o().Observable.of((0,h.sZ)(l)))}return i}))}}},875859:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(557579),o=r(881808),i=r(555927),a=r(737295),c=r.n(a),l=r(728252),u=r.n(l),s=r(227361),p=r.n(s),f=r(313311),d=r.n(f),y=r(957557),v=r.n(y),m=r(66604),g=r.n(m),b=r(984596),h=r.n(b),O=r(414293),w=r.n(O),j=r(761868);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function P(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===S(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{settings:{step:0}}};const Z=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.Cz:return u()("builder.settings.".concat(r.key),r.value,t);case n.n8:return u()("builder.editor",r.widget,u()("builder.settings",r.settings||I.settings,t));case n.dm:return u()("builder.editor",k(k({},r.widget),{},{widgetType:r.widget&&r.widget.widgetType||"chart"}),u()("builder.settings.step","chart"===(r.widget&&r.widget.widgetType||"chart")?1:0,t));case n.BV:if(r.key.includes("maps")&&!w()(r.value)){var a,l=r.value,s=n.h9.exec(r.key)||[],f=E(s,3),y=f[1],m=f[2];if(y){var b=p()(t,"builder.editor.maps",[]);l=u()(m,r.value,b.find((function(e){return e.mapId===y})))}return(0,j.vy)("builder.editor.maps",l,{mapId:y||(null===(a=r.value)||void 0===a?void 0:a.mapId)},t)}return u()("builder.editor.".concat(r.key),r.value,t);case n.Jm:return(0,j.vy)("containers[".concat(r.target,"].widgets"),k(k({id:r.id},r.widget),{},{dataGrid:r.id&&{y:0,x:0,w:1,h:1}}),{id:r.widget.id||r.id},t);case n.J5:var O="containers[".concat(r.target,"].widgets"),S=p()(t,O);return S?u()(O,r.widgets,t):t;case n.$A:var D=d()(p()(t,"containers[".concat(r.target,"].widgets")),{id:r.id}),C=r.value;return"merge"===r.mode&&(C="maps"===r.key?D.maps.map((function(e){var t;return e.mapId===(null===(t=r.value)||void 0===t?void 0:t.mapId)?k(k({},e),null==r?void 0:r.value):e})):c()({},D[r.key],r.value)),(0,j.vy)("containers[".concat(r.target,"].widgets"),u()(r.key,C,D),{id:r.id},t);case n.eb:if(r.layer){var T=p()(t,"containers[".concat(n.VR,"].widgets"));if(T)return u()("containers[".concat(n.VR,"].widgets"),T.map((function(e){return p()(e,"layer.id")===r.layer.id?u()("layer",r.layer,e):e})),t)}return t;case n.yY:var x="containers[".concat(n.VR,"].widgets"),Z=(0,j.z6)("containers[".concat(r.target,"].widgets"),{id:r.widget.id},t),F=p()(Z,x,[]);return u()(x,F.map((function(e){if(e.dependenciesMap){var t=E(n.oU.exec((Object.values(e.dependenciesMap)||[])[0]),2)[1];if(t&&r.widget.id===t)return k(k({},v()(e,"dependenciesMap")),{},{mapSync:!1})}return e})),t);case i.E9:var R=r.data;return u()("containers[".concat(n.VR,"]"),k({},R),t);case o.ok:var M=r.config||{},A=M.widgetsConfig;return u()("containers[".concat(n.VR,"]"),k({},A),t);case n.v8:return u()("containers[".concat(r.target,"].layout"),r.layout)(u()("containers[".concat(r.target,"].layouts"),r.allLayouts,t));case n.ff:case i.R4:return u()("containers[".concat(n.VR,"]"),I.containers[n.VR],t);case n.S0:var L=r.key,G=r.value;return u()("dependencies[".concat(L,"]"),G,t);case n.Q6:var N=r.key;return u()("dependencies[".concat(N,"]"),null,t);case n.kb:var z=r.dependencies;return u()("dependencies",z,t);case n.GV:return u()("dependencies",I.dependencies,t);case n.Ym:var W=r.widget,V=void 0===W?{}:W;if(V.dataGrid&&V.dataGrid.static)return t;var q=p()(t,"containers[".concat(r.target,"].collapsed[").concat(V.id));if(q){var _=[].concat(P(p()(t,"containers[".concat(r.target,"].layout"),[])),P(h()(p()(q,"layout",[])))),H=g()(p()(t,"containers[".concat(r.target,"].layouts"),{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(P(e),P(h()(p()(q,"layouts[".concat(t,"]"),[]))))}));return v()((0,j.qC)(u()("containers[".concat(r.target,"].layout"),_),u()("containers[".concat(r.target,"].layouts"),H))(t),"containers[".concat(r.target,"].collapsed[").concat(V.id,"]"))}return u()("containers[".concat(r.target,"].collapsed[").concat(V.id,"]"),{layout:d()(p()(t,"containers[".concat(r.target,"].layout"),[]),{i:V.id}),layouts:g()(p()(t,"containers[".concat(r.target,"].layouts"),{}),(function(e){return d()(e,{i:V.id})}))},t);case n.ke:var U,B,$,K,Q,J,Y,X,ee,te,re,ne,oe,ie,ae,ce,le,ue,se=r.widget,pe=null==t||null===(U=t.containers)||void 0===U||null===(B=U[r.target])||void 0===B?void 0:B.maximized;if(!se||null!==($=se.dataGrid)&&void 0!==$&&$.static)return t;if(null!=pe&&pe.widget)return(0,j.qC)(u()("containers[".concat(r.target,"].layout"),pe.layout),u()("containers[".concat(r.target,"].layouts"),pe.layouts),u()("containers[".concat(r.target,"].maximized"),{}),u()("containers[".concat(r.target,"].widgets"),null==t||null===(ce=t.containers)||void 0===ce||null===(le=ce[r.target])||void 0===le||null===(ue=le.widgets)||void 0===ue?void 0:ue.map((function(e){return e.id===pe.widget.id?k(k({},e),{},{dataGrid:k(k({},e.dataGrid),{},{isDraggable:!0,isResizable:!0})}):e}))))(t);if(null!=t&&null!==(K=t.containers)&&void 0!==K&&null!==(Q=K[r.target])&&void 0!==Q&&null!==(J=Q.collapsed)&&void 0!==J&&J[se.id])return t;var fe={x:0,y:0,w:1,h:1},de=d()(null==t||null===(Y=t.containers)||void 0===Y||null===(X=Y[r.target])||void 0===X?void 0:X.layout,{i:se.id}),ye=k(k({},de),fe);return(0,j.qC)(u()("containers[".concat(r.target,"].maximized"),{widget:se,layout:null==t||null===(ee=t.containers)||void 0===ee||null===(te=ee[r.target])||void 0===te?void 0:te.layout,layouts:null==t||null===(re=t.containers)||void 0===re||null===(ne=re[r.target])||void 0===ne?void 0:ne.layouts}),u()("containers[".concat(r.target,"].layout"),[ye]),u()("containers[".concat(r.target,"].layouts"),{xxs:[ye]}),u()("containers[".concat(r.target,"].widgets"),null==t||null===(oe=t.containers)||void 0===oe||null===(ie=oe[r.target])||void 0===ie||null===(ae=ie.widgets)||void 0===ae?void 0:ae.map((function(e){return e.id===se.id?k(k({},e),{},{dataGrid:k(k({},e.dataGrid),{},{isDraggable:!1,isResizable:!1})}):e}))))(t);case n.uU:var ve=p()(t,"containers[".concat(r.target,"].widgets"),[]).filter((function(e){return!e.dataGrid||!e.dataGrid.static})),me=ve.filter((function(e){return p()(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),ge=ve.filter((function(e){return!p()(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),be=0===ge.length;return be?me.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):ge.length>0?ge.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):t;case n.nw:return u()("tray",r.value,t);default:return t}}}}]);